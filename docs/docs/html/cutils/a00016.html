<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simple data structures / objects in plain C: bhash.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simple data structures / objects in plain C&#160;<span id="projectnumber">Snapshot</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bhash.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="a00028_source.html">cutils/sring.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="a00022_source.html">cutils/hashfunction.h</a>&gt;</code><br/>
</div>
<p><a href="a00016_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00004.html">HASH_Entry</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its structure. The user of this hash thing can please key/value wherever he likes.  <a href="a00004.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00003.html">HASH</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Hash table that is implemented as bucket hash table.  <a href="a00003.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ad6e4f490068b19fa3fea075d3b0180f7">HASH_BUCKET_FOREACH</a>(cur, bucket)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a7a866beabda7e0bd95e19ae7c708c8c0">HASH_FOREACH_KEY</a>(cur, hash, key, key_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro: iterate over all elements that match a given key (multimap)  <a href="#a7a866beabda7e0bd95e19ae7c708c8c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ad5d12368e1648a383d048e7fed56fa82">HASH_DELETEALL_KEY</a>(cur, hash, key, key_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in loop code.  <a href="#ad5d12368e1648a383d048e7fed56fa82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a6bdd6abcda051166ee1ce8586b80cd8a">HASH_DELETEALL_KEY_END</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a635ee4184a9ca1e86138aec673a0a9b1">HASH_FOREACH</a>(cur, hash)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro: iterate over all elements in hash table.  <a href="#a635ee4184a9ca1e86138aec673a0a9b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a1dd13a6578ab349c2cbac48304a0f5e1">HASH_FOREACH_END</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro: close block opened by HASH_FOREACH.  <a href="#a1dd13a6578ab349c2cbac48304a0f5e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a1193ff43ed7c2f743c974d75c39efc93">HASH_DELETEALL</a>(cur, hash)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro: iterate over all elements in hash table and delete them from the table; allow the user to free the memory of each element.  <a href="#a1193ff43ed7c2f743c974d75c39efc93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#aee7185cd320df1c4a801762c8f5201b6">HASH_DELETEALL_END</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro: close block opened by HASH_DELETEALL.  <a href="#aee7185cd320df1c4a801762c8f5201b6"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="a00022.html#a0add298fa768754c300d2489164b8677">HASH_VALUE</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a11718c21601b9ee597d31cb7e720c260">HASH_FUNCTION</a> )(void *data, ssize_t length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#af9eab147ddd898a2d7fb376e1f8753a3">HASH_COMPARE_KEY</a> )(<a class="el" href="a00004.html">HASH_Entry</a> *, void *key, ssize_t key_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a> )(<a class="el" href="a00004.html">HASH_Entry</a> *, void *context)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a73ce0ca18399c5db0bac0491aeadba8d">HASH_init</a> (<a class="el" href="a00003.html">HASH</a> *hash, size_t buckets, int ismultimap, <a class="el" href="a00016.html#af9eab147ddd898a2d7fb376e1f8753a3">HASH_COMPARE_KEY</a> compare_key, <a class="el" href="a00016.html#a11718c21601b9ee597d31cb7e720c260">HASH_FUNCTION</a> hash_func)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Object constructor; initialise the hash that allows one entry for a given key.  <a href="#a73ce0ca18399c5db0bac0491aeadba8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#acef4d862b25db1563ce621265299fb2e">HASH_resize</a> (<a class="el" href="a00003.html">HASH</a> *hash, size_t buckets)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">resize the hash table  <a href="#acef4d862b25db1563ce621265299fb2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a889a4afc9437f453ed7db27d7bd39d3d">HASH_free</a> (<a class="el" href="a00003.html">HASH</a> *hash)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Object destructor; frees a hash table.  <a href="#a889a4afc9437f453ed7db27d7bd39d3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a8924e383f82b78dcb693ffcab49188b0">HASH_size</a> (<a class="el" href="a00003.html">HASH</a> *hash)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns number of elements in hash table  <a href="#a8924e383f82b78dcb693ffcab49188b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00004.html">HASH_Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a072fef06fb9a516f47771ddd3946bf20">HASH_find</a> (<a class="el" href="a00003.html">HASH</a> *phash, void *key, ssize_t key_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">find entry with given key in hash table; for multimaps this will return the first occurence of the key.  <a href="#a072fef06fb9a516f47771ddd3946bf20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00004.html">HASH_Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a2f20017ef2a49dc235a8bea78b254dd6">HASH_find_next</a> (<a class="el" href="a00003.html">HASH</a> *phash, <a class="el" href="a00004.html">HASH_Entry</a> *prev, void *key, ssize_t key_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">for multimaps - find next occurence of key  <a href="#a2f20017ef2a49dc235a8bea78b254dd6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#af9ce37d092fe7b3ae217336ef623a7dc">HASH_insert</a> (<a class="el" href="a00003.html">HASH</a> *phash, <a class="el" href="a00004.html">HASH_Entry</a> *entry, void *key, ssize_t key_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">insert new entry in hash table  <a href="#af9ce37d092fe7b3ae217336ef623a7dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00004.html">HASH_Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a9546382a27adc8b91d70cd6e4c4723c3">HASH_unlink</a> (<a class="el" href="a00003.html">HASH</a> *hash, void *key, ssize_t key_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">find first hash table entry and unlink it from its bucket. The caller of this function has to free memory held by hash table entry.  <a href="#a9546382a27adc8b91d70cd6e4c4723c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a96c141f22c63392dfe758de963ffe8f5">HASH_foreach_key</a> (<a class="el" href="a00003.html">HASH</a> *hash, void *key, ssize_t key_size, <a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a> eval_func, void *context)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">iterate over all entries of the hash table that match a given key and invoke callback with those elements.  <a href="#a96c141f22c63392dfe758de963ffe8f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a251e1a1fd0e312bae674631001fd4b55">HASH_foreach</a> (<a class="el" href="a00003.html">HASH</a> *hash, <a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a> eval_func, void *context)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">iterate over all entries of the hash table and invoke callback with each element. Equivalent of Lisp foldl,mapcar and friends.  <a href="#a251e1a1fd0e312bae674631001fd4b55"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE <a class="el" href="a00004.html">HASH_Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a58acba9b6611fe07a44253eeb4307e09">HASH_findif</a> (<a class="el" href="a00003.html">HASH</a> *hash, <a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a> eval_func, void *context, int *retval)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">find an element within the hash. callback is invoked for each element of the list, when the callback returns non zero value the iteration stops as we have found what we searched for.  <a href="#a58acba9b6611fe07a44253eeb4307e09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a0ed6fe026b7e8aef4611325ab2ffdc47">HASH_deleteall</a> (<a class="el" href="a00003.html">HASH</a> *hash, int offset_of_link, <a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a> on_delete, void *context)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">iterate over all entries of the hash table and delete them.  <a href="#a0ed6fe026b7e8aef4611325ab2ffdc47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a3482872e1f844042afc76de5136bff3f">HASH_check</a> (<a class="el" href="a00003.html">HASH</a> *hash)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">check consistency of bucket hash structure.  <a href="#a3482872e1f844042afc76de5136bff3f"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad6e4f490068b19fa3fea075d3b0180f7"></a><!-- doxytag: member="bhash.h::HASH_BUCKET_FOREACH" ref="ad6e4f490068b19fa3fea075d3b0180f7" args="(cur, bucket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_BUCKET_FOREACH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cur, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bucket&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">for</span>((cur) = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) ((bucket)-&gt;next);\
                (<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *) (cur) != (bucket);\
                (cur) = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) (cur)-&gt;entry.next )
</pre></div>
<p>Definition at line <a class="el" href="a00016_source.html#l00182">182</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1193ff43ed7c2f743c974d75c39efc93"></a><!-- doxytag: member="bhash.h::HASH_DELETEALL" ref="a1193ff43ed7c2f743c974d75c39efc93" args="(cur, hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_DELETEALL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cur, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hash&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{ \
        <span class="keywordtype">size_t</span> HASH_delallforeach_i##cur = 0; \
        <span class="keywordflow">for</span>(HASH_delallforeach_i##cur = 0; HASH_delallforeach_i##cur &lt; (hash)-&gt;buckets_size; HASH_delallforeach_i##cur ++) \
        <span class="keywordflow">while</span>( !<a class="code" href="a00028.html#a23aab5b8a7efeacf278b444bb785bc1d" title="checks if argument list is empty">SRING_isempty</a>( &amp;(hash)-&gt;buckets[ HASH_delallforeach_i##cur ]) ) { \
                (cur) = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) <a class="code" href="a00028.html#ab573cc304039b055762f9251cc551d36">SRING_unlink_after</a>( &amp;(hash)-&gt;buckets[ HASH_delallforeach_i##cur ] );\
                (hash)-&gt;elmcount--;
</pre></div>
<p>Macro: iterate over all elements in hash table and delete them from the table; allow the user to free the memory of each element. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cur</td><td>(type <a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) </td></tr>
    <tr><td class="paramname">hash</td><td>(type <a class="el" href="a00003.html" title="Hash table that is implemented as bucket hash table.">HASH</a> *) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00259">259</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="aee7185cd320df1c4a801762c8f5201b6"></a><!-- doxytag: member="bhash.h::HASH_DELETEALL_END" ref="aee7185cd320df1c4a801762c8f5201b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_DELETEALL_END</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">}\
}
</pre></div>
<p>Macro: close block opened by HASH_DELETEALL. </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00270">270</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad5d12368e1648a383d048e7fed56fa82"></a><!-- doxytag: member="bhash.h::HASH_DELETEALL_KEY" ref="ad5d12368e1648a383d048e7fed56fa82" args="(cur, hash, key, key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_DELETEALL_KEY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cur, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hash, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key_size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{  \
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> * <a class="code" href="a00016.html#ad5d12368e1648a383d048e7fed56fa82" title="Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in lo...">HASH_DELETEALL_KEY</a>##next = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) 0xFFFFFFFF; \
        <span class="keywordflow">for</span>( (cur) = <a class="code" href="a00015.html#a3841ec1a9db3bcb2cd6dbd2ba36c4550" title="find first hash table entry and unlink it from its bucket. The caller of this function has to free me...">HASH_unlink</a>( (hash), (key), (key_size ) ) ; \
                 (cur) &amp;&amp; (<a class="code" href="a00016.html#ad5d12368e1648a383d048e7fed56fa82" title="Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in lo...">HASH_DELETEALL_KEY</a>##next); \
                 (<a class="code" href="a00016.html#ad5d12368e1648a383d048e7fed56fa82" title="Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in lo...">HASH_DELETEALL_KEY</a>##next) =  <a class="code" href="a00015.html#a2f20017ef2a49dc235a8bea78b254dd6" title="for multimaps - find next occurence of key">HASH_find_next</a>( (hash), (cur), (key), (key_size) ) ) { \
                 <span class="keywordflow">if</span> ((<a class="code" href="a00016.html#ad5d12368e1648a383d048e7fed56fa82" title="Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in lo...">HASH_DELETEALL_KEY</a>##next) != (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) 0xFFFFFFFF) { \
                         <a class="code" href="a00028.html#ab573cc304039b055762f9251cc551d36">SRING_unlink_after</a>( (<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *) (cur) ); \
                         (hash)-&gt;elmcount--; \
                         (cur) = (<a class="code" href="a00016.html#ad5d12368e1648a383d048e7fed56fa82" title="Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in lo...">HASH_DELETEALL_KEY</a>##next); \
                 }
</pre></div>
<p>Macro: unlink al entries that match a given key (for multimap); the user has to free the memory in loop code. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cur</td><td>(type <a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) current entry </td></tr>
    <tr><td class="paramname">hash</td><td>(type <a class="el" href="a00003.html" title="Hash table that is implemented as bucket hash table.">HASH</a> *) the object </td></tr>
    <tr><td class="paramname">key</td><td>(type void *) the key </td></tr>
    <tr><td class="paramname">key_size</td><td>(type size_t) length of key </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00218">218</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6bdd6abcda051166ee1ce8586b80cd8a"></a><!-- doxytag: member="bhash.h::HASH_DELETEALL_KEY_END" ref="a6bdd6abcda051166ee1ce8586b80cd8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_DELETEALL_KEY_END</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">} \
}
</pre></div>
<p>Definition at line <a class="el" href="a00016_source.html#l00230">230</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a635ee4184a9ca1e86138aec673a0a9b1"></a><!-- doxytag: member="bhash.h::HASH_FOREACH" ref="a635ee4184a9ca1e86138aec673a0a9b1" args="(cur, hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_FOREACH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cur, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hash&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{ \
        <span class="keywordtype">size_t</span> HASH_foreach_i##cur = 0; \
        <span class="keywordflow">for</span>(HASH_foreach_i##cur = 0; HASH_foreach_i##cur &lt; (hash)-&gt;buckets_size; HASH_foreach_i##cur ++) \
                <a class="code" href="a00016.html#ad6e4f490068b19fa3fea075d3b0180f7">HASH_BUCKET_FOREACH</a>( cur, &amp;(hash)-&gt;buckets[ HASH_foreach_i##cur ] ) {
</pre></div>
<p>Macro: iterate over all elements in hash table. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cur</td><td>(type <a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) </td></tr>
    <tr><td class="paramname">hash</td><td>(type <a class="el" href="a00003.html" title="Hash table that is implemented as bucket hash table.">HASH</a> *) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00240">240</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1dd13a6578ab349c2cbac48304a0f5e1"></a><!-- doxytag: member="bhash.h::HASH_FOREACH_END" ref="a1dd13a6578ab349c2cbac48304a0f5e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_FOREACH_END</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">}\
}
</pre></div>
<p>Macro: close block opened by HASH_FOREACH. </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00250">250</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7a866beabda7e0bd95e19ae7c708c8c0"></a><!-- doxytag: member="bhash.h::HASH_FOREACH_KEY" ref="a7a866beabda7e0bd95e19ae7c708c8c0" args="(cur, hash, key, key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_FOREACH_KEY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cur, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hash, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key_size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">for</span>( (cur) = <a class="code" href="a00015.html#a072fef06fb9a516f47771ddd3946bf20" title="find entry with given key in hash table; for multimaps this will return the first occurence of the ke...">HASH_find</a>( (hash), (key), (key_size ) ) ; \
                  (cur); \
                  (cur) =  <a class="code" href="a00015.html#a2f20017ef2a49dc235a8bea78b254dd6" title="for multimaps - find next occurence of key">HASH_find_next</a>( (hash), (cur), (key), (key_size) ) )
</pre></div>
<p>Macro: iterate over all elements that match a given key (multimap) </p>
<p>Usage: <a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *cur;</p>
<p><a class="el" href="a00016.html#a7a866beabda7e0bd95e19ae7c708c8c0" title="Macro: iterate over all elements that match a given key (multimap)">HASH_FOREACH_KEY(cur,hash)</a> { =do something with cur - don't delete it= }</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cur</td><td>(type <a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) current entry </td></tr>
    <tr><td class="paramname">hash</td><td>(type <a class="el" href="a00003.html" title="Hash table that is implemented as bucket hash table.">HASH</a> *) the object </td></tr>
    <tr><td class="paramname">key</td><td>(type void *) the key </td></tr>
    <tr><td class="paramname">key_size</td><td>(type size_t) length of key </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00203">203</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="af9eab147ddd898a2d7fb376e1f8753a3"></a><!-- doxytag: member="bhash.h::HASH_COMPARE_KEY" ref="af9eab147ddd898a2d7fb376e1f8753a3" args=")(HASH_Entry *, void *key, ssize_t key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="a00016.html#af9eab147ddd898a2d7fb376e1f8753a3">HASH_COMPARE_KEY</a>)(<a class="el" href="a00004.html">HASH_Entry</a> *, void *key, ssize_t key_size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Compare argument key with hash key embedded in entry. </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00035">35</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a11718c21601b9ee597d31cb7e720c260"></a><!-- doxytag: member="bhash.h::HASH_FUNCTION" ref="a11718c21601b9ee597d31cb7e720c260" args=")(void *data, ssize_t length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="a00022.html#a0add298fa768754c300d2489164b8677">HASH_VALUE</a>(* <a class="el" href="a00016.html#a11718c21601b9ee597d31cb7e720c260">HASH_FUNCTION</a>)(void *data, ssize_t length)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>compute hash value </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00029">29</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1bcff3f62d46d79b790bed89891cd9a5"></a><!-- doxytag: member="bhash.h::HASH_VISITOR" ref="a1bcff3f62d46d79b790bed89891cd9a5" args=")(HASH_Entry *, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a>)(<a class="el" href="a00004.html">HASH_Entry</a> *, void *context)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Visit a hash entry. </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00040">40</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3482872e1f844042afc76de5136bff3f"></a><!-- doxytag: member="bhash.h::HASH_check" ref="a3482872e1f844042afc76de5136bff3f" args="(HASH *hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE int HASH_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check consistency of bucket hash structure. </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00378">378</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span>  i,nbuck = hash-&gt;<a class="code" href="a00003.html#a13b4c75f393b997dc965cef4fc2508c1">buckets_size</a>;
        <span class="keywordtype">size_t</span>  count_of_elem = 0;
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a>  *cur;
        
        <span class="keywordflow">for</span>(i=0; i &lt; nbuck; i++) {
                <span class="keywordflow">if</span> (!<a class="code" href="a00028.html#a7d49e006bf25f2d83d15b70caf9f3254">SRING_check</a>(hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a> + i)) {
                   <span class="keywordflow">return</span> 0;
                }
        }

        <a class="code" href="a00016.html#a635ee4184a9ca1e86138aec673a0a9b1" title="Macro: iterate over all elements in hash table.">HASH_FOREACH</a>(cur,hash)
                count_of_elem++;
        <a class="code" href="a00016.html#a1dd13a6578ab349c2cbac48304a0f5e1" title="Macro: close block opened by HASH_FOREACH.">HASH_FOREACH_END</a>
        
        if (count_of_elem != hash-&gt;elmcount) {
                <span class="keywordflow">return</span> 0;
        }

        <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ed6fe026b7e8aef4611325ab2ffdc47"></a><!-- doxytag: member="bhash.h::HASH_deleteall" ref="a0ed6fe026b7e8aef4611325ab2ffdc47" args="(HASH *hash, int offset_of_link, HASH_VISITOR on_delete, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void HASH_deleteall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset_of_link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a>&#160;</td>
          <td class="paramname"><em>on_delete</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>iterate over all entries of the hash table and delete them. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(in) the object </td></tr>
    <tr><td class="paramname">on_delete</td><td>(in) optional callback, call prior to freing object. </td></tr>
    <tr><td class="paramname">offset_of_link</td><td>(in) offset of <a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> in embedded structure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00362">362</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *cur;

        <a class="code" href="a00016.html#a1193ff43ed7c2f743c974d75c39efc93" title="Macro: iterate over all elements in hash table and delete them from the table; allow the user to free...">HASH_DELETEALL</a>(cur,hash);
                <span class="keywordflow">if</span> (on_delete) {
                        on_delete(cur,context);
                } 
                free( <a class="code" href="a00014.html#a7b468c9bd3d1f3de0bb47e2ea23ddb1c">_MEMBEROF</a>(cur,offset_of_link) );
        <a class="code" href="a00016.html#aee7185cd320df1c4a801762c8f5201b6" title="Macro: close block opened by HASH_DELETEALL.">HASH_DELETEALL_END</a>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a072fef06fb9a516f47771ddd3946bf20"></a><!-- doxytag: member="bhash.h::HASH_find" ref="a072fef06fb9a516f47771ddd3946bf20" args="(HASH *phash, void *key, ssize_t key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00004.html">HASH_Entry</a>* HASH_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>phash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find entry with given key in hash table; for multimaps this will return the first occurence of the key. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">phash</td><td>(in) the object </td></tr>
    <tr><td class="paramname">key</td><td>(in) pointer to key </td></tr>
    <tr><td class="paramname">key_size</td><td>(in) size of key</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to entry if found; NULL if not found </dd></dl>

<p>Definition at line <a class="el" href="a00015_source.html#l00119">119</a> of file <a class="el" href="a00015_source.html">bhash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00022.html#a0add298fa768754c300d2489164b8677">HASH_VALUE</a> hash = phash-&gt;<a class="code" href="a00003.html#aa8d9ed13981a492e221f55d4a0ff8a9b">hash_func</a>( key, key_size );
        <span class="keywordtype">int</span>             bucket =   <a class="code" href="a00015.html#acb4c58835714882f70736b2c45188ff4">ADJUST_HASH</a>(hash, phash-&gt;<a class="code" href="a00003.html#a13b4c75f393b997dc965cef4fc2508c1">buckets_size</a>);
        <a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a>   *abucket = &amp;phash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>[ bucket ];   
        
        <span class="keywordflow">return</span> <a class="code" href="a00015.html#aa0f01a8d9a72c6a69d0891fd81076bee">HASH_find_in_bucket</a>( abucket, hash, phash-&gt;<a class="code" href="a00003.html#a9f012f5c0abfa8de8f6ff6d98a3d5f83">compare_key</a>, key, key_size );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f20017ef2a49dc235a8bea78b254dd6"></a><!-- doxytag: member="bhash.h::HASH_find_next" ref="a2f20017ef2a49dc235a8bea78b254dd6" args="(HASH *phash, HASH_Entry *prev, void *key, ssize_t key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00004.html">HASH_Entry</a>* HASH_find_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>phash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00004.html">HASH_Entry</a> *&#160;</td>
          <td class="paramname"><em>prev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>for multimaps - find next occurence of key </p>
<p>Usage to retrive all occurences of a key</p>
<p><a class="el" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> * entry; for( entry = HASH_find(hash, key, sizeof(key) ) ; entry; entry = HASH_find_next(hash, entry, key, sizeof(key) ) {</p>
<p>}</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">phash</td><td>(in) the object </td></tr>
    <tr><td class="paramname">prev</td><td>(in) value returned by first invocation of VBUCKETHASH_find or previous invocation of VBUCKETHASH_find_next </td></tr>
    <tr><td class="paramname">key</td><td>(in) pointer to key </td></tr>
    <tr><td class="paramname">key_size</td><td>(in) size of key. If key is a null terminated string then pass VHASH_STRING as value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to entry if found; NULL if not found </dd></dl>

<p>Definition at line <a class="el" href="a00015_source.html#l00128">128</a> of file <a class="el" href="a00015_source.html">bhash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *next;

        <span class="keywordflow">if</span> (!phash-&gt;<a class="code" href="a00003.html#a1e56521c716b07928dc326eced3b50c0">ismultimap</a>) {
                <span class="keywordflow">return</span> 0;
        }

        next = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) prev-&gt;<a class="code" href="a00004.html#a41027b39fbfa250c8b29c79a4634e7f5">entry</a>.<a class="code" href="a00010.html#a9842e33c47a3fff2a6ddec4078ef7190">next</a>;
        if (!next) {
                <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00004.html#a0a321e75db9083da90e2557e6cc24de8">hash</a> != prev-&gt;<a class="code" href="a00004.html#a0a321e75db9083da90e2557e6cc24de8">hash</a>) {
                <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">if</span> (phash-&gt;<a class="code" href="a00003.html#a9f012f5c0abfa8de8f6ff6d98a3d5f83">compare_key</a>( next, key, key_size ) != 0) {
                <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">return</span> next;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58acba9b6611fe07a44253eeb4307e09"></a><!-- doxytag: member="bhash.h::HASH_findif" ref="a58acba9b6611fe07a44253eeb4307e09" args="(HASH *hash, HASH_VISITOR eval_func, void *context, int *retval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE <a class="el" href="a00004.html">HASH_Entry</a>* HASH_findif </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a>&#160;</td>
          <td class="paramname"><em>eval_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>retval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find an element within the hash. callback is invoked for each element of the list, when the callback returns non zero value the iteration stops as we have found what we searched for. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(in) the object. </td></tr>
    <tr><td class="paramname">eval_func</td><td>(in) callback that is called to visit each set (or cleared) bit. </td></tr>
    <tr><td class="paramname">context</td><td>(in) pointer that is passed as context on each invocation of callback. </td></tr>
    <tr><td class="paramname">retval</td><td>(out) optional - the first non zero value returned by eval callback, if NULL then ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the list element that has matched (i.e. element that has been found). </dd></dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00331">331</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span> i;
        <a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *cur;
        <span class="keywordtype">int</span> ret;        

        <span class="keywordflow">if</span> (!eval_func) {
                <span class="keywordflow">return</span> 0;
        }

        <span class="keywordflow">for</span>(i=0; i&lt;hash-&gt;<a class="code" href="a00003.html#a13b4c75f393b997dc965cef4fc2508c1">buckets_size</a>; i++) {
                        <a class="code" href="a00028.html#a39582582e3bfccf18e39710e75009ad1" title="Macro for iterate over all elements of a list, the list is traversed in forward direction from first ...">SRING_FOREACH</a>( cur, &amp;hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>[i] ) {
                                        ret = eval_func( (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a>*) cur, context);
                                        <span class="keywordflow">if</span> (ret) {
                                                <span class="keywordflow">if</span> (retval) {
                                                        *retval = ret;
                                                }
                                                <span class="keywordflow">return</span> (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) cur;
                                        }               
                        }
        }       

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a251e1a1fd0e312bae674631001fd4b55"></a><!-- doxytag: member="bhash.h::HASH_foreach" ref="a251e1a1fd0e312bae674631001fd4b55" args="(HASH *hash, HASH_VISITOR eval_func, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void HASH_foreach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a>&#160;</td>
          <td class="paramname"><em>eval_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>iterate over all entries of the hash table and invoke callback with each element. Equivalent of Lisp foldl,mapcar and friends. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td></td></tr>
    <tr><td class="paramname">eval_func</td><td>function invoked for every element in hash table. </td></tr>
    <tr><td class="paramname">context</td><td>data pointer passed to every invocation of eval_func </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00307">307</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *cur;

        <span class="keywordflow">if</span> (!eval_func) {
                <span class="keywordflow">return</span>;
        }

        <a class="code" href="a00016.html#a635ee4184a9ca1e86138aec673a0a9b1" title="Macro: iterate over all elements in hash table.">HASH_FOREACH</a>(cur,hash)
                eval_func( cur, context);
        <a class="code" href="a00016.html#a1dd13a6578ab349c2cbac48304a0f5e1" title="Macro: close block opened by HASH_FOREACH.">HASH_FOREACH_END</a>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a96c141f22c63392dfe758de963ffe8f5"></a><!-- doxytag: member="bhash.h::HASH_foreach_key" ref="a96c141f22c63392dfe758de963ffe8f5" args="(HASH *hash, void *key, ssize_t key_size, HASH_VISITOR eval_func, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void HASH_foreach_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&#160;</td>
          <td class="paramname"><em>key_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00016.html#a1bcff3f62d46d79b790bed89891cd9a5">HASH_VISITOR</a>&#160;</td>
          <td class="paramname"><em>eval_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>iterate over all entries of the hash table that match a given key and invoke callback with those elements. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(in) the object</td></tr>
    <tr><td class="paramname">key</td><td>(in) key </td></tr>
    <tr><td class="paramname">key_size</td><td>(in) size of key</td></tr>
    <tr><td class="paramname">eval_func</td><td>(in) function invoked for every element in hash table. </td></tr>
    <tr><td class="paramname">context</td><td>(in) data pointer passed to every invocation of eval_func </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00287">287</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *cur;

        <span class="keywordflow">if</span> (!eval_func) {
                <span class="keywordflow">return</span>;
        }
        <a class="code" href="a00016.html#a7a866beabda7e0bd95e19ae7c708c8c0" title="Macro: iterate over all elements that match a given key (multimap)">HASH_FOREACH_KEY</a>(cur,hash,key,key_size) {
                eval_func( cur, context);
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a889a4afc9437f453ed7db27d7bd39d3d"></a><!-- doxytag: member="bhash.h::HASH_free" ref="a889a4afc9437f453ed7db27d7bd39d3d" args="(HASH *hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void HASH_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Object destructor; frees a hash table. </p>
<p>All elements currently contained in hash table will remain in memory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(in out) the object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00016_source.html#l00111">111</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
   <span class="keywordflow">if</span> (hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>) {
        free(hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>);
                hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a> = 0;
   }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a73ce0ca18399c5db0bac0491aeadba8d"></a><!-- doxytag: member="bhash.h::HASH_init" ref="a73ce0ca18399c5db0bac0491aeadba8d" args="(HASH *hash, size_t buckets, int ismultimap, HASH_COMPARE_KEY compare_key, HASH_FUNCTION hash_func)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HASH_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ismultimap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00016.html#af9eab147ddd898a2d7fb376e1f8753a3">HASH_COMPARE_KEY</a>&#160;</td>
          <td class="paramname"><em>compare_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00016.html#a11718c21601b9ee597d31cb7e720c260">HASH_FUNCTION</a>&#160;</td>
          <td class="paramname"><em>hash_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Object constructor; initialise the hash that allows one entry for a given key. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(out) the object. </td></tr>
    <tr><td class="paramname">buckets</td><td>(in) number of buckets - will be rounded to closes power of two (i.e. number of arrays of linked lists structures, each separate list holds elements with same hash number). </td></tr>
    <tr><td class="paramname">hash_func</td><td>(in) pointer to hash function </td></tr>
    <tr><td class="paramname">compare</td><td>(in) pointer to compare function; compares if two keys are equal, (called when hash value of two entries is equal)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if ok </dd></dl>

<p>Definition at line <a class="el" href="a00015_source.html#l00013">13</a> of file <a class="el" href="a00015_source.html">bhash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span> i;

        buckets = <a class="code" href="a00032.html#a191e663cb1cc920f6b50f17567ea8c5c">UTIL_round_to_power_of_n</a>( buckets );


        hash-&gt;<a class="code" href="a00003.html#adfd1d7fb9add98a87d2852e45c7cd018">elmcount</a> = 0;

        <span class="keywordflow">if</span> (!hash_func) {
          hash-&gt;<a class="code" href="a00003.html#aa8d9ed13981a492e221f55d4a0ff8a9b">hash_func</a> = <a class="code" href="a00021.html#a1498645507ca3a2df89dabf640fde50d" title="One at a time by Bob Jenkins.">HASHFUNCTION_Bob_Jenkins_one_at_a_time</a>;
        } <span class="keywordflow">else</span> {
          hash-&gt;<a class="code" href="a00003.html#aa8d9ed13981a492e221f55d4a0ff8a9b">hash_func</a> = hash_func;
        }
        hash-&gt;<a class="code" href="a00003.html#a9f012f5c0abfa8de8f6ff6d98a3d5f83">compare_key</a> = compare_key;

        hash-&gt;<a class="code" href="a00003.html#a1e56521c716b07928dc326eced3b50c0">ismultimap</a> = ismultimap;

        hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a> = (<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *) malloc( <span class="keyword">sizeof</span>(<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a>) * buckets );
        <span class="keywordflow">if</span> (!hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>) {
                <span class="keywordflow">return</span> -1;
        }
        hash-&gt;<a class="code" href="a00003.html#a13b4c75f393b997dc965cef4fc2508c1">buckets_size</a> = buckets;
        
        <span class="keywordflow">for</span>(i=0;i&lt;buckets;i++) {
          <a class="code" href="a00028.html#a53ac9788c8cdc9e03a9e343fd7e8b15a" title="initialises an empty list head">SRING_init</a>(  &amp;hash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>[i] );
        }


        hash-&gt;<a class="code" href="a00003.html#a8713031ba9a40fa717f1d3b8114691c0">mult_load_factor</a> = 2;
        hash-&gt;<a class="code" href="a00003.html#a6f4e674640c97d88dfd2e557d660f147">div_load_factor</a> = 3;

        hash-&gt;<a class="code" href="a00003.html#a00bd0beb9248ca36fff916569eb71526">resize_threshold</a> = (buckets * hash-&gt;<a class="code" href="a00003.html#a8713031ba9a40fa717f1d3b8114691c0">mult_load_factor</a>) / hash-&gt;<a class="code" href="a00003.html#a6f4e674640c97d88dfd2e557d660f147">div_load_factor</a>;

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9ce37d092fe7b3ae217336ef623a7dc"></a><!-- doxytag: member="bhash.h::HASH_insert" ref="af9ce37d092fe7b3ae217336ef623a7dc" args="(HASH *phash, HASH_Entry *entry, void *key, ssize_t key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HASH_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>phash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00004.html">HASH_Entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>insert new entry in hash table </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(in) the object </td></tr>
    <tr><td class="paramname">key</td><td>(in) key </td></tr>
    <tr><td class="paramname">size</td><td>(in) size of key. If key is a null terminated string then pass VHASH_STRING as value. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00015_source.html#l00149">149</a> of file <a class="el" href="a00015_source.html">bhash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00022.html#a0add298fa768754c300d2489164b8677">HASH_VALUE</a> hash;
        <span class="keywordtype">int</span>             bucket;
        <a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a>   *abucket,*fnd;

        <span class="keywordflow">if</span> ((phash-&gt;<a class="code" href="a00003.html#adfd1d7fb9add98a87d2852e45c7cd018">elmcount</a> + 1) &gt;= phash-&gt;<a class="code" href="a00003.html#a00bd0beb9248ca36fff916569eb71526">resize_threshold</a>) {

           <span class="keywordflow">if</span> (<a class="code" href="a00015.html#acef4d862b25db1563ce621265299fb2e" title="resize the hash table">HASH_resize</a>(phash, 2 * phash-&gt;<a class="code" href="a00003.html#a13b4c75f393b997dc965cef4fc2508c1">buckets_size</a>)) {
             <span class="keywordflow">return</span> -1;
           }
        }

        hash = phash-&gt;<a class="code" href="a00003.html#aa8d9ed13981a492e221f55d4a0ff8a9b">hash_func</a>( key, key_size );       
        entry-&gt;<a class="code" href="a00004.html#a0a321e75db9083da90e2557e6cc24de8">hash</a> = hash;

        bucket =   <a class="code" href="a00015.html#acb4c58835714882f70736b2c45188ff4">ADJUST_HASH</a>(hash, phash-&gt;<a class="code" href="a00003.html#a13b4c75f393b997dc965cef4fc2508c1">buckets_size</a>);
        abucket = &amp;phash-&gt;<a class="code" href="a00003.html#a7ec749b263c20879444d18b7ab4824e8">buckets</a>[ bucket ];   
        
        
        fnd = (<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *) <a class="code" href="a00015.html#aa0f01a8d9a72c6a69d0891fd81076bee">HASH_find_in_bucket</a>( abucket, hash, phash-&gt;<a class="code" href="a00003.html#a9f012f5c0abfa8de8f6ff6d98a3d5f83">compare_key</a>, key, key_size );

        <span class="comment">/* multimap allows only one entry with the given key */</span>
        <span class="keywordflow">if</span> (!phash-&gt;<a class="code" href="a00003.html#a1e56521c716b07928dc326eced3b50c0">ismultimap</a> &amp;&amp; fnd) {
                <span class="keywordflow">return</span> -1;
        }

        <span class="keywordflow">if</span> (fnd) {
                <a class="code" href="a00028.html#a6a2a1950260f3fb3d385bde480e5c976" title="insert new entry after a given entry.">SRING_insert_after</a>( fnd, &amp;entry-&gt;<a class="code" href="a00004.html#a41027b39fbfa250c8b29c79a4634e7f5">entry</a> );
        } <span class="keywordflow">else</span> {
                <a class="code" href="a00028.html#a608f3b7787a81834f15eddbc4135d04f">SRING_push_front</a>( abucket,  &amp;entry-&gt;<a class="code" href="a00004.html#a41027b39fbfa250c8b29c79a4634e7f5">entry</a> );
        }
        phash-&gt;<a class="code" href="a00003.html#adfd1d7fb9add98a87d2852e45c7cd018">elmcount</a>++;

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acef4d862b25db1563ce621265299fb2e"></a><!-- doxytag: member="bhash.h::HASH_resize" ref="acef4d862b25db1563ce621265299fb2e" args="(HASH *hash, size_t buckets)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HASH_resize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buckets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>resize the hash table </p>
<p>Change number of buckets in hash table. The function pass over each element in the hash table and insert it into the resized table.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>(in out) the object </td></tr>
    <tr><td class="paramname">buckets</td><td>(in) new number of buckets </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00015_source.html#l00060">60</a> of file <a class="el" href="a00015_source.html">bhash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *pbuckets;
        <span class="keywordtype">size_t</span> i;
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *cur;
        <span class="keywordtype">size_t</span> elmcount;

        buckets = <a class="code" href="a00032.html#a191e663cb1cc920f6b50f17567ea8c5c">UTIL_round_to_power_of_n</a>( buckets );

        pbuckets = malloc( <span class="keyword">sizeof</span>(<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a>) * buckets);
        <span class="keywordflow">if</span> (!pbuckets) {
                <span class="keywordflow">return</span> -1;
        }
        <span class="keywordflow">for</span>(i=0;i&lt;buckets;i++) {
                <a class="code" href="a00028.html#a53ac9788c8cdc9e03a9e343fd7e8b15a" title="initialises an empty list head">SRING_init</a>( pbuckets + i );
        }

        elmcount = hash-&gt;<a class="code" href="a00003.html#adfd1d7fb9add98a87d2852e45c7cd018">elmcount</a>;

        <a class="code" href="a00016.html#a1193ff43ed7c2f743c974d75c39efc93" title="Macro: iterate over all elements in hash table and delete them from the table; allow the user to free...">HASH_DELETEALL</a>(cur,hash)
                i = <a class="code" href="a00015.html#acb4c58835714882f70736b2c45188ff4">ADJUST_HASH</a>(  cur-&gt;hash, buckets);
                <a class="code" href="a00028.html#a608f3b7787a81834f15eddbc4135d04f">SRING_push_front</a>( pbuckets + i, (<a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a> *) cur);
        <a class="code" href="a00016.html#aee7185cd320df1c4a801762c8f5201b6" title="Macro: close block opened by HASH_DELETEALL.">HASH_DELETEALL_END</a>

        free( hash-&gt;buckets );

        hash-&gt;buckets = pbuckets;
        hash-&gt;buckets_size = buckets;
        hash-&gt;elmcount = elmcount;


        hash-&gt;resize_threshold = (buckets * hash-&gt;mult_load_factor) / hash-&gt;div_load_factor;

        return 0;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a8924e383f82b78dcb693ffcab49188b0"></a><!-- doxytag: member="bhash.h::HASH_size" ref="a8924e383f82b78dcb693ffcab49188b0" args="(HASH *hash)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE size_t HASH_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns number of elements in hash table </p>

<p>Definition at line <a class="el" href="a00016_source.html#l00124">124</a> of file <a class="el" href="a00016_source.html">bhash.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> hash-&gt;<a class="code" href="a00003.html#adfd1d7fb9add98a87d2852e45c7cd018">elmcount</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9546382a27adc8b91d70cd6e4c4723c3"></a><!-- doxytag: member="bhash.h::HASH_unlink" ref="a9546382a27adc8b91d70cd6e4c4723c3" args="(HASH *hash, void *key, ssize_t key_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00004.html">HASH_Entry</a>* HASH_unlink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00003.html">HASH</a> *&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>find first hash table entry and unlink it from its bucket. The caller of this function has to free memory held by hash table entry. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td></td></tr>
    <tr><td class="paramname">key</td><td></td></tr>
    <tr><td class="paramname">size</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>if entry with given keys exists - pointer to hash table entry. </dd></dl>

<p>Definition at line <a class="el" href="a00015_source.html#l00186">186</a> of file <a class="el" href="a00015_source.html">bhash.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="a00022.html#a0add298fa768754c300d2489164b8677">HASH_VALUE</a> hash;
        <span class="keywordtype">int</span>             bucket;
        <a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a>   *abucket;
        <a class="code" href="a00010.html" title="Single linked circular list data structure; where each list element can be of different length...">SRING</a>   *pos,*prev;
        <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *ret = 0;


        hash =  phash-&gt;hash_func( key, key_size );      
        bucket =   <a class="code" href="a00015.html#acb4c58835714882f70736b2c45188ff4">ADJUST_HASH</a>(hash, phash-&gt;buckets_size);
        abucket = &amp;phash-&gt;buckets[ bucket ];   

        prev = abucket;
        <a class="code" href="a00028.html#a39582582e3bfccf18e39710e75009ad1" title="Macro for iterate over all elements of a list, the list is traversed in forward direction from first ...">SRING_FOREACH</a>(pos, abucket) {
                <a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *entry = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) pos;

                <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="a00004.html#a0a321e75db9083da90e2557e6cc24de8">hash</a> == hash) {
                  
                        <span class="keywordflow">if</span> (phash-&gt;compare_key( entry, key, key_size ) == 0) {
                                ret = (<a class="code" href="a00004.html" title="Entry in bucket hash table Each hash table entry has to embed a VBUCKETHASH_Entry as part of its stru...">HASH_Entry</a> *) <a class="code" href="a00028.html#ab573cc304039b055762f9251cc551d36">SRING_unlink_after</a>(prev);
                                phash-&gt;elmcount--;      
                                <span class="keywordflow">return</span> ret;
                        }
                }
                prev = pos;
        }

        <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Aug 23 2011 18:31:22 for Simple data structures / objects in plain C by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
