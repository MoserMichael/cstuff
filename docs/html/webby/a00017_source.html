<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WEBBY - the embedded web server with many faces / objects in plain C: webby.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WEBBY - the embedded web server with many faces / objects in plain C&#160;<span id="projectnumber">Snapshot</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">webby.h</div>  </div>
</div>
<div class="contents">
<a href="a00017.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef __WEBBY_API_H__</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define __WEBBY_API_H__</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;cutils/array.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;cutils/dbuf.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;nutils/bf.h&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;nutils/addrutil.h&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;hutils/http.h&gt;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="keyword">struct </span><a class="code" href="a00006.html" title="http filter definition">tagHTTP_FILTER</a>; 
<a name="l00012"></a>00012 <span class="keyword">struct </span><a class="code" href="a00007.html" title="HTTP_SERVLET definition.">tagHTTP_SERVLET</a>;
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="comment">// =============================================================================================</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">/**</span>
<a name="l00017"></a>00017 <span class="comment"> * @defgroup HTTP_FILTER</span>
<a name="l00018"></a>00018 <span class="comment"> * @brief HTTP_FILTER - a filter implements a stage of processing the HTTP request / response.</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> * A filter can modify either one of the following aspects, as they are processed.</span>
<a name="l00021"></a>00021 <span class="comment"> *   - http request header</span>
<a name="l00022"></a>00022 <span class="comment"> *   - http request data</span>
<a name="l00023"></a>00023 <span class="comment"> *   - http response header</span>
<a name="l00024"></a>00024 <span class="comment"> *   - http response data</span>
<a name="l00025"></a>00025 <span class="comment"> *</span>
<a name="l00026"></a>00026 <span class="comment"> * @{</span>
<a name="l00027"></a>00027 <span class="comment"> */</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="comment"></span>
<a name="l00030"></a>00030 <span class="comment">/**</span>
<a name="l00031"></a>00031 <span class="comment"> * @brief structure is passed to filter function as argument. </span>
<a name="l00032"></a>00032 <span class="comment"> */</span>
<a name="l00033"></a><a class="code" href="a00005.html">00033</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00005.html" title="structure is passed to filter function as argument.">tagFILTER_CONTEXT</a> {
<a name="l00034"></a><a class="code" href="a00005.html#a67ef86adee752b865e229fcf29b9ed90">00034</a>   <span class="keywordtype">void</span> *<a class="code" href="a00005.html#a67ef86adee752b865e229fcf29b9ed90">connection_ctx</a>;               <span class="comment">/** per connection data data maintained for particular filter */</span>
<a name="l00035"></a><a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">00035</a>   <span class="keyword">struct </span><a class="code" href="a00006.html" title="http filter definition">tagHTTP_FILTER</a> *<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>;      <span class="comment">/** pointer to filter instance */</span>
<a name="l00036"></a>00036  
<a name="l00037"></a><a class="code" href="a00005.html#aee0b58f4f4d1647af8f01e19a046cdf5">00037</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00005.html#aee0b58f4f4d1647af8f01e19a046cdf5">next_request_filter_idx</a>;     <span class="comment">/** relative offset to next request filter */</span>
<a name="l00038"></a><a class="code" href="a00005.html#a6ca4c6974a625c100a13adfdb710acc4">00038</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00005.html#a6ca4c6974a625c100a13adfdb710acc4">next_response_filter_idx</a>;    <span class="comment">/** relative offset to next response filter */</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 } <a class="code" href="a00019.html#ga84c94eac8d6cfb5184937e3047eed77f" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a>;
<a name="l00041"></a>00041  
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="a00019.html#ga074df44cd12ded4ad916672d381edaca">00043</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#ga074df44cd12ded4ad916672d381edaca">HTTP_FILTER_INIT</a>) (<span class="keyword">struct </span><a class="code" href="a00006.html" title="http filter definition">tagHTTP_FILTER</a> *filter);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00046"></a><a class="code" href="a00019.html#gaaed8d741f1f3f1f7d16153f48df23e7d">00046</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#gaaed8d741f1f3f1f7d16153f48df23e7d">HTTP_FILTER_FREE</a>) (<span class="keyword">struct </span><a class="code" href="a00006.html" title="http filter definition">tagHTTP_FILTER</a> *filter);
<a name="l00047"></a>00047 <span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">/**</span>
<a name="l00049"></a>00049 <span class="comment"> * @brief filter callback: a http request header has been parsed, now the request header is passed through the filter chain.</span>
<a name="l00050"></a>00050 <span class="comment"> *</span>
<a name="l00051"></a>00051 <span class="comment"> * @param request - the http request header</span>
<a name="l00052"></a>00052 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00053"></a>00053 <span class="comment"> *</span>
<a name="l00054"></a>00054 <span class="comment"> */</span>
<a name="l00055"></a><a class="code" href="a00019.html#ga27407d3eb9a137407a8432603325b5b0">00055</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#ga27407d3eb9a137407a8432603325b5b0" title="filter callback: a http request header has been parsed, now the request header is passed through the ...">HTTP_FILTER_REQUEST_HEADER_PARSED</a>) (HTTP_REQUEST *request,  <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );
<a name="l00056"></a>00056 <span class="comment"></span>
<a name="l00057"></a>00057 <span class="comment">/**</span>
<a name="l00058"></a>00058 <span class="comment"> * @brief filter callback: a buffer that is part of the request data has been received.</span>
<a name="l00059"></a>00059 <span class="comment"> *</span>
<a name="l00060"></a>00060 <span class="comment"> * @param request - the http request header</span>
<a name="l00061"></a>00061 <span class="comment"> * @param data - request data, if request data is chunked then this is after parsing of chunk (no chunk headers included)</span>
<a name="l00062"></a>00062 <span class="comment"> * @param data_size - size of request data</span>
<a name="l00063"></a>00063 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00064"></a>00064 <span class="comment"> */</span>
<a name="l00065"></a><a class="code" href="a00019.html#ga07fb25acde5fb71c0bbcad748331e462">00065</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#ga07fb25acde5fb71c0bbcad748331e462" title="filter callback: a buffer that is part of the request data has been received.">HTTP_FILTER_REQUEST_DATA</a>)          (HTTP_REQUEST *request, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> data_size,  <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );
<a name="l00066"></a>00066 <span class="comment"></span>
<a name="l00067"></a>00067 <span class="comment">/**</span>
<a name="l00068"></a>00068 <span class="comment"> * @brief filter callback: the http request has been parsed completely, and all request data has already been processed.</span>
<a name="l00069"></a>00069 <span class="comment"> *</span>
<a name="l00070"></a>00070 <span class="comment"> * @brief request - the http request header.</span>
<a name="l00071"></a>00071 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00072"></a>00072 <span class="comment"> */</span>
<a name="l00073"></a><a class="code" href="a00019.html#gaf6f5ee2b34c30cd71ddeccf8a8cc98c8">00073</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#gaf6f5ee2b34c30cd71ddeccf8a8cc98c8" title="filter callback: the http request has been parsed completely, and all request data has already been p...">HTTP_FILTER_REQUEST_COMPLETED</a>)     (HTTP_REQUEST *request, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );
<a name="l00074"></a>00074 <span class="comment"></span>
<a name="l00075"></a>00075 <span class="comment">/**</span>
<a name="l00076"></a>00076 <span class="comment"> * @brief filter callback: a response header has now passed through the filter.</span>
<a name="l00077"></a>00077 <span class="comment"> *</span>
<a name="l00078"></a>00078 <span class="comment"> * @brief response - the http response header.</span>
<a name="l00079"></a>00079 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00080"></a>00080 <span class="comment"> */</span>
<a name="l00081"></a><a class="code" href="a00019.html#gace404adfffdcfe00660631c1b74d141e">00081</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#gace404adfffdcfe00660631c1b74d141e" title="filter callback: a response header has now passed through the filter.">HTTP_FILTER_RESPONSE_HEADER</a>) (HTTP_RESPONSE *response,  <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="a00001.html">00084</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00085"></a>00085   <span class="keyword">struct </span>{
<a name="l00086"></a><a class="code" href="a00001.html#a3ff50d24d705be48dd99ef32cfa0ad34">00086</a>     <span class="keywordtype">void</span> *<a class="code" href="a00001.html#a3ff50d24d705be48dd99ef32cfa0ad34">data</a>;
<a name="l00087"></a><a class="code" href="a00001.html#a5025856b2bd77112fef2041fd64b33e9">00087</a>     <span class="keywordtype">size_t</span> <a class="code" href="a00001.html#a5025856b2bd77112fef2041fd64b33e9">data_size</a>;
<a name="l00088"></a>00088   } no_chunk;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   <span class="keyword">struct </span>{
<a name="l00091"></a><a class="code" href="a00001.html#a626fdc4af5978bfaca650f930d5eeeac">00091</a>     BF *<a class="code" href="a00001.html#a626fdc4af5978bfaca650f930d5eeeac">bf</a>;
<a name="l00092"></a><a class="code" href="a00001.html#a35c09a09a98b296c7ed641b70f8510eb">00092</a>     <span class="keywordtype">int</span> <a class="code" href="a00001.html#a35c09a09a98b296c7ed641b70f8510eb">chunk_no</a>;
<a name="l00093"></a>00093    } chunk;
<a name="l00094"></a>00094 } <a class="code" href="a00001.html">RDATA</a>;
<a name="l00095"></a>00095 <span class="comment"></span>
<a name="l00096"></a>00096 <span class="comment">/**</span>
<a name="l00097"></a>00097 <span class="comment"> * @brief filter callback: a buffer that is part of the response data  has now passed through the filter</span>
<a name="l00098"></a>00098 <span class="comment"> *</span>
<a name="l00099"></a>00099 <span class="comment"> * There are two situations - the response uses &#39;chunks&#39;, the response does not use chunks.</span>
<a name="l00100"></a>00100 <span class="comment"> *</span>
<a name="l00101"></a>00101 <span class="comment"> * If the response is chunked then a buffer object (BF) is used, which reserves space for chunk header before the start of the buffer.</span>
<a name="l00102"></a>00102 <span class="comment"> </span>
<a name="l00103"></a>00103 <span class="comment"> * The case of chunks: is_chunk != 0</span>
<a name="l00104"></a>00104 <span class="comment"> * rdata.chunk.bf - the chunk buffer (zero for the last chunk)</span>
<a name="l00105"></a>00105 <span class="comment"> * rdata.chunk.chunk_no - the number of the chunk (starts with zero).</span>
<a name="l00106"></a>00106 <span class="comment"> *</span>
<a name="l00107"></a>00107 <span class="comment"> * The case of no chunks:</span>
<a name="l00108"></a>00108 <span class="comment"> * rdata.no_chunk.data - response data</span>
<a name="l00109"></a>00109 <span class="comment"> * rdata.no_chunk.data_size - size of response data.</span>
<a name="l00110"></a>00110 <span class="comment"> *</span>
<a name="l00111"></a>00111 <span class="comment"> *</span>
<a name="l00112"></a>00112 <span class="comment"> * @brief response - the http response header.</span>
<a name="l00113"></a>00113 <span class="comment"> * @brief is_chunk - not zero if response is chunked</span>
<a name="l00114"></a>00114 <span class="comment"> * @brief rdata - union that holds data for both chunked and not chunked case;</span>
<a name="l00115"></a>00115 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00116"></a>00116 <span class="comment"> */</span>
<a name="l00117"></a><a class="code" href="a00019.html#ga3fc7467c414925853cc55e085bef5ddc">00117</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#ga3fc7467c414925853cc55e085bef5ddc" title="filter callback: a buffer that is part of the response data has now passed through the filter...">HTTP_FILTER_RESPONSE_DATA</a>) (HTTP_RESPONSE *response, <span class="keywordtype">int</span> is_chunk, <a class="code" href="a00001.html">RDATA</a> rdata, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );
<a name="l00118"></a>00118 <span class="comment"></span>
<a name="l00119"></a>00119 <span class="comment">/**</span>
<a name="l00120"></a>00120 <span class="comment"> * @brief filter callback: a http response has now passed completely through the filter, all response data has already been sent.</span>
<a name="l00121"></a>00121 <span class="comment"> *</span>
<a name="l00122"></a>00122 <span class="comment"> * @brief response - the http response header.</span>
<a name="l00123"></a>00123 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00124"></a>00124 <span class="comment"> */</span>
<a name="l00125"></a><a class="code" href="a00019.html#ga3424cf82a3e72ff1a900de9383c52e61">00125</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#ga3424cf82a3e72ff1a900de9383c52e61" title="filter callback: a http response has now passed completely through the filter, all response data has ...">HTTP_FILTER_RESPONSE_COMPLETED</a>)     (HTTP_RESPONSE *response, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );  
<a name="l00126"></a>00126 <span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">/**</span>
<a name="l00128"></a>00128 <span class="comment"> * @brief filter callback: called when a connection has been closed, the filter should free the connection context data, if any of it has been allocated.</span>
<a name="l00129"></a>00129 <span class="comment"> *</span>
<a name="l00130"></a>00130 <span class="comment"> * @param context - filter context, we need it to call the next filter.</span>
<a name="l00131"></a>00131 <span class="comment"> */</span>
<a name="l00132"></a><a class="code" href="a00019.html#ga1f024d51ed2b1422159315f06fb051d8">00132</a> <span class="keyword">typedef</span> int    (*<a class="code" href="a00019.html#ga1f024d51ed2b1422159315f06fb051d8" title="filter callback: called when a connection has been closed, the filter should free the connection cont...">HTTP_FILTER_CONNECTION_CLOSE</a>)       (<a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context );
<a name="l00133"></a>00133 <span class="comment"></span>
<a name="l00134"></a>00134 <span class="comment">/**</span>
<a name="l00135"></a>00135 <span class="comment"> * @brief http filter definition</span>
<a name="l00136"></a>00136 <span class="comment"> */</span>
<a name="l00137"></a><a class="code" href="a00006.html">00137</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00006.html" title="http filter definition">tagHTTP_FILTER</a> {
<a name="l00138"></a>00138   
<a name="l00139"></a><a class="code" href="a00006.html#a2d64a2f372cb2f22ecc8fdfa53c0e3d7">00139</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00006.html#a2d64a2f372cb2f22ecc8fdfa53c0e3d7">next_request_filter_idx</a>;    <span class="comment">/** absolute index of next request filter */</span>
<a name="l00140"></a><a class="code" href="a00006.html#a39dbd3ce3cfb65108dfcdc963edc8a85">00140</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00006.html#a39dbd3ce3cfb65108dfcdc963edc8a85">next_response_filter_idx</a>;   <span class="comment">/** absolute index of next response filter */</span>
<a name="l00141"></a>00141 
<a name="l00142"></a>00142  
<a name="l00143"></a><a class="code" href="a00006.html#ab987d9068f1114e469acaf4ea45e4b97">00143</a>   <a class="code" href="a00019.html#ga074df44cd12ded4ad916672d381edaca">HTTP_FILTER_INIT</a>                   <a class="code" href="a00006.html#ab987d9068f1114e469acaf4ea45e4b97">filter_free</a>;
<a name="l00144"></a><a class="code" href="a00006.html#a07354d3aa5e87b6a432531f0d88bf1f4">00144</a>   <a class="code" href="a00019.html#gaaed8d741f1f3f1f7d16153f48df23e7d">HTTP_FILTER_FREE</a>                   <a class="code" href="a00006.html#a07354d3aa5e87b6a432531f0d88bf1f4">filter_init</a>; 
<a name="l00145"></a>00145   
<a name="l00146"></a><a class="code" href="a00006.html#a680109fd10e4d352a38426fb3832154d">00146</a>   <a class="code" href="a00019.html#ga27407d3eb9a137407a8432603325b5b0" title="filter callback: a http request header has been parsed, now the request header is passed through the ...">HTTP_FILTER_REQUEST_HEADER_PARSED</a>  <a class="code" href="a00006.html#a680109fd10e4d352a38426fb3832154d">on_request_header_parsed</a>;
<a name="l00147"></a><a class="code" href="a00006.html#a6acb030789968d9a75fb32f3305c7a3c">00147</a>   <a class="code" href="a00019.html#ga07fb25acde5fb71c0bbcad748331e462" title="filter callback: a buffer that is part of the request data has been received.">HTTP_FILTER_REQUEST_DATA</a>           <a class="code" href="a00006.html#a6acb030789968d9a75fb32f3305c7a3c">on_request_data</a>;
<a name="l00148"></a><a class="code" href="a00006.html#ac171b2bcad117337da86aa482089ca8e">00148</a>   <a class="code" href="a00019.html#gaf6f5ee2b34c30cd71ddeccf8a8cc98c8" title="filter callback: the http request has been parsed completely, and all request data has already been p...">HTTP_FILTER_REQUEST_COMPLETED</a>      <a class="code" href="a00006.html#ac171b2bcad117337da86aa482089ca8e">on_request_completed</a>;
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="a00006.html#a9e06479f6878202fa0b7c47adeed5030">00150</a>   <a class="code" href="a00019.html#gace404adfffdcfe00660631c1b74d141e" title="filter callback: a response header has now passed through the filter.">HTTP_FILTER_RESPONSE_HEADER</a>        <a class="code" href="a00006.html#a9e06479f6878202fa0b7c47adeed5030">on_response_header</a>;
<a name="l00151"></a><a class="code" href="a00006.html#a7505d786cec72de0641211b0da6b5b75">00151</a>   <a class="code" href="a00019.html#ga3fc7467c414925853cc55e085bef5ddc" title="filter callback: a buffer that is part of the response data has now passed through the filter...">HTTP_FILTER_RESPONSE_DATA</a>          <a class="code" href="a00006.html#a7505d786cec72de0641211b0da6b5b75">on_response_data</a>;
<a name="l00152"></a><a class="code" href="a00006.html#a68eb80c5a6751584f37e7c57bea85798">00152</a>   <a class="code" href="a00019.html#ga3424cf82a3e72ff1a900de9383c52e61" title="filter callback: a http response has now passed completely through the filter, all response data has ...">HTTP_FILTER_RESPONSE_COMPLETED</a>     <a class="code" href="a00006.html#a68eb80c5a6751584f37e7c57bea85798">on_response_completed</a>;
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="a00006.html#a4e7c8380d5073fb0596d2ac4950c309f">00154</a>   <a class="code" href="a00019.html#ga1f024d51ed2b1422159315f06fb051d8" title="filter callback: called when a connection has been closed, the filter should free the connection cont...">HTTP_FILTER_CONNECTION_CLOSE</a>       <a class="code" href="a00006.html#a4e7c8380d5073fb0596d2ac4950c309f">on_connection_close</a>;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 } <a class="code" href="a00019.html#ga11cd4e823ff1b0e53cd2b74efc0713b6" title="http filter definition">HTTP_FILTER</a>;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <span class="comment"></span>
<a name="l00159"></a>00159 <span class="comment">/**</span>
<a name="l00160"></a>00160 <span class="comment"> * @brief called by implementaiton of HTTP_FILTER_REQUEST_HEADER_PARSED filter callback, calls the next filter in the chain</span>
<a name="l00161"></a>00161 <span class="comment"> */</span>
<a name="l00162"></a><a class="code" href="a00019.html#gaa72af13e42b9712dcd6651373796ebdc">00162</a> M_INLINE <span class="keywordtype">int</span> <a class="code" href="a00019.html#gaa72af13e42b9712dcd6651373796ebdc" title="called by implementaiton of HTTP_FILTER_REQUEST_HEADER_PARSED filter callback, calls the next filter ...">call_next_filter_request_header_parsed</a>( HTTP_REQUEST *request, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context )
<a name="l00163"></a>00163 {
<a name="l00164"></a>00164   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *next = context + context-&gt;<a class="code" href="a00005.html#aee0b58f4f4d1647af8f01e19a046cdf5">next_request_filter_idx</a>;
<a name="l00165"></a>00165   <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a> == 0) {
<a name="l00166"></a>00166     <span class="keywordflow">return</span> 0;
<a name="l00167"></a>00167   }
<a name="l00168"></a>00168   <span class="keywordflow">return</span> next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>-&gt;<a class="code" href="a00006.html#a680109fd10e4d352a38426fb3832154d">on_request_header_parsed</a>( request, next );
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 <span class="comment"></span>
<a name="l00171"></a>00171 <span class="comment">/**</span>
<a name="l00172"></a>00172 <span class="comment"> * @brief called by implementaiton of HTTP_FILTER_REQUEST_DATA filter callback, calls the next filter in the chain</span>
<a name="l00173"></a>00173 <span class="comment"> */</span>
<a name="l00174"></a><a class="code" href="a00019.html#ga039bb80f347f613afb853cfd74478630">00174</a> M_INLINE <span class="keywordtype">int</span> <a class="code" href="a00019.html#ga039bb80f347f613afb853cfd74478630" title="called by implementaiton of HTTP_FILTER_REQUEST_DATA filter callback, calls the next filter in the ch...">call_next_filter_request_data</a>( HTTP_REQUEST *request, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> data_size, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context )
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *next = context + context-&gt;<a class="code" href="a00005.html#aee0b58f4f4d1647af8f01e19a046cdf5">next_request_filter_idx</a>;
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a> == 0) {
<a name="l00178"></a>00178     <span class="keywordflow">return</span> 0;
<a name="l00179"></a>00179   }
<a name="l00180"></a>00180   <span class="keywordflow">return</span> next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>-&gt;<a class="code" href="a00006.html#a6acb030789968d9a75fb32f3305c7a3c">on_request_data</a>( request, data, data_size, next );
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 <span class="comment"></span>
<a name="l00183"></a>00183 <span class="comment">/**</span>
<a name="l00184"></a>00184 <span class="comment"> * @brief called by implementaiton of HTTP_FILTER_REQUEST_COMPLETED filter callback, calls the next filter in the chain</span>
<a name="l00185"></a>00185 <span class="comment"> */</span>
<a name="l00186"></a><a class="code" href="a00019.html#ga0640b7d009a7e522d8ca1482f521a453">00186</a> M_INLINE <span class="keywordtype">int</span> <a class="code" href="a00019.html#ga0640b7d009a7e522d8ca1482f521a453" title="called by implementaiton of HTTP_FILTER_REQUEST_COMPLETED filter callback, calls the next filter in t...">call_next_filter_request_completed</a>( HTTP_REQUEST *request,  <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context )
<a name="l00187"></a>00187 {
<a name="l00188"></a>00188   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *next = context +  context-&gt;<a class="code" href="a00005.html#aee0b58f4f4d1647af8f01e19a046cdf5">next_request_filter_idx</a>;
<a name="l00189"></a>00189   <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a> == 0) {
<a name="l00190"></a>00190     <span class="keywordflow">return</span> 0;
<a name="l00191"></a>00191   }
<a name="l00192"></a>00192   <span class="keywordflow">return</span> next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>-&gt;<a class="code" href="a00006.html#ac171b2bcad117337da86aa482089ca8e">on_request_completed</a>( request,  next );
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 <span class="comment"></span>
<a name="l00195"></a>00195 <span class="comment">/**</span>
<a name="l00196"></a>00196 <span class="comment"> * @brief called by implementaiton of HTTP_FILTER_RESPONSE_HEADER filter callback, calls the next filter in the chain</span>
<a name="l00197"></a>00197 <span class="comment"> */</span>
<a name="l00198"></a><a class="code" href="a00019.html#ga32fc8cf13fe1f891d2dcbb7e50f3b3a7">00198</a> M_INLINE <span class="keywordtype">int</span> <a class="code" href="a00019.html#ga32fc8cf13fe1f891d2dcbb7e50f3b3a7" title="called by implementaiton of HTTP_FILTER_RESPONSE_HEADER filter callback, calls the next filter in the...">call_next_filter_response_header</a> (HTTP_RESPONSE *response,  <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context )
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *next = context - context-&gt;<a class="code" href="a00005.html#a6ca4c6974a625c100a13adfdb710acc4">next_response_filter_idx</a>;
<a name="l00201"></a>00201   <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a> == 0) {
<a name="l00202"></a>00202     <span class="keywordflow">return</span> 0;
<a name="l00203"></a>00203   }
<a name="l00204"></a>00204   <span class="keywordflow">return</span> next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>-&gt;<a class="code" href="a00006.html#a9e06479f6878202fa0b7c47adeed5030">on_response_header</a>( response, next );
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 <span class="comment"></span>
<a name="l00207"></a>00207 <span class="comment">/**</span>
<a name="l00208"></a>00208 <span class="comment"> * @brief called by implementaiton of HTTP_FILTER_RESPONSE_DATA filter callback, calls the next filter in the chain</span>
<a name="l00209"></a>00209 <span class="comment"> */</span>
<a name="l00210"></a><a class="code" href="a00019.html#ga9f0f204b55f36f27c0fb680faf7e1305">00210</a> M_INLINE <span class="keywordtype">int</span> <a class="code" href="a00019.html#ga9f0f204b55f36f27c0fb680faf7e1305" title="called by implementaiton of HTTP_FILTER_RESPONSE_DATA filter callback, calls the next filter in the c...">call_next_filter_response_data</a> (HTTP_RESPONSE *response,  <span class="keywordtype">int</span> is_chunk, <a class="code" href="a00001.html">RDATA</a> rdata, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context )
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *next = context -  context-&gt;<a class="code" href="a00005.html#a6ca4c6974a625c100a13adfdb710acc4">next_response_filter_idx</a>;
<a name="l00213"></a>00213   <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a> == 0) {
<a name="l00214"></a>00214     <span class="keywordflow">return</span> 0;
<a name="l00215"></a>00215   }
<a name="l00216"></a>00216   <span class="keywordflow">return</span> next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>-&gt;<a class="code" href="a00006.html#a7505d786cec72de0641211b0da6b5b75">on_response_data</a>( response, is_chunk, rdata, next );
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 <span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">/**</span>
<a name="l00220"></a>00220 <span class="comment"> * @brief called by implementaiton of HTTP_FILTER_RESPONSE_COMPLETED filter callback, calls the next filter in the chain</span>
<a name="l00221"></a>00221 <span class="comment"> */</span>
<a name="l00222"></a><a class="code" href="a00019.html#ga4418cb00f29e45e927ca4b428358f288">00222</a> M_INLINE <span class="keywordtype">int</span> <a class="code" href="a00019.html#ga4418cb00f29e45e927ca4b428358f288" title="called by implementaiton of HTTP_FILTER_RESPONSE_COMPLETED filter callback, calls the next filter in ...">call_next_filter_response_completed</a> (HTTP_RESPONSE *response, <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *context )
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *next = context -  context-&gt;<a class="code" href="a00005.html#a6ca4c6974a625c100a13adfdb710acc4">next_response_filter_idx</a>;
<a name="l00225"></a>00225   <span class="keywordflow">if</span> (next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a> == 0) {
<a name="l00226"></a>00226     <span class="keywordflow">return</span> 0;
<a name="l00227"></a>00227   }
<a name="l00228"></a>00228   <span class="keywordflow">return</span> next-&gt;<a class="code" href="a00005.html#ae9d9ee39035e778d3716187778febf40">filter</a>-&gt;<a class="code" href="a00006.html#a68eb80c5a6751584f37e7c57bea85798">on_response_completed</a>( response, next );
<a name="l00229"></a>00229 }
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment"></span>
<a name="l00232"></a>00232 <span class="comment">/**</span>
<a name="l00233"></a>00233 <span class="comment"> * @}</span>
<a name="l00234"></a>00234 <span class="comment"> */</span>
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <span class="comment">// =============================================================================================</span><span class="comment"></span>
<a name="l00237"></a>00237 <span class="comment">/**</span>
<a name="l00238"></a>00238 <span class="comment"> * @defgroup HTTP_SERVLET</span>
<a name="l00239"></a>00239 <span class="comment"> * @brief a servlet is a class that processes the http request and produces the http response</span>
<a name="l00240"></a>00240 <span class="comment"> */</span>
<a name="l00241"></a>00241 <span class="comment"></span>
<a name="l00242"></a>00242 <span class="comment">/** </span>
<a name="l00243"></a>00243 <span class="comment"> * @defgroup HTTP_servlet_request</span>
<a name="l00244"></a>00244 <span class="comment"> * @ingroup HTTP_SERVLET</span>
<a name="l00245"></a>00245 <span class="comment"> * @brief represents the http request and includes methods to access the request header and request body.</span>
<a name="l00246"></a>00246 <span class="comment"> * @{</span>
<a name="l00247"></a>00247 <span class="comment"> */</span>
<a name="l00248"></a><a class="code" href="a00008.html">00248</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00008.html">tagHTTP_servlet_request</a>
<a name="l00249"></a>00249 {
<a name="l00250"></a><a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">00250</a>   HTTP_REQUEST *<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>;
<a name="l00251"></a><a class="code" href="a00008.html#a427d50a189aafc2db7b033acf64d69ef">00251</a>   DBUF *<a class="code" href="a00008.html#a427d50a189aafc2db7b033acf64d69ef">request_data</a>;
<a name="l00252"></a>00252 } <a class="code" href="a00021.html#ga50e6ef5a1a187d05468238619735c67d">HTTP_servlet_request</a>;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="a00021.html#ga868212bcf4f0161db9f4394f42b77dec">00255</a> M_INLINE Http_version_type <a class="code" href="a00021.html#ga868212bcf4f0161db9f4394f42b77dec">HTTP_servlet_protocol</a>(<a class="code" href="a00008.html">HTTP_servlet_request</a> *req)
<a name="l00256"></a>00256 { 
<a name="l00257"></a>00257   <span class="keywordflow">return</span> req-&gt;<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>-&gt;version; 
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="a00021.html#gaff7feee0d3c940abd53967613b77a056">00260</a> M_INLINE Http_method_type <a class="code" href="a00021.html#gaff7feee0d3c940abd53967613b77a056">HTTP_servlet_method</a>(<a class="code" href="a00008.html">HTTP_servlet_request</a> *req)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262   <span class="keywordflow">return</span> req-&gt;<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>-&gt;method;
<a name="l00263"></a>00263 }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="a00021.html#gacbade50f8391f298f07e964fefff3f60">00265</a> M_INLINE URI *<a class="code" href="a00021.html#gacbade50f8391f298f07e964fefff3f60">HTTP_servlet_uri</a>( <a class="code" href="a00008.html">HTTP_servlet_request</a> *req )
<a name="l00266"></a>00266 {
<a name="l00267"></a>00267   <span class="keywordflow">return</span> &amp;req-&gt;<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>-&gt;url;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a><a class="code" href="a00021.html#gab592944c860cbfb2f349d5d84b044d5d">00270</a> M_INLINE <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="a00021.html#gab592944c860cbfb2f349d5d84b044d5d">HTTP_servlet_find_header</a>( <a class="code" href="a00008.html">HTTP_servlet_request</a> *req, <span class="keyword">const</span> <span class="keywordtype">char</span> *header_name ) {
<a name="l00271"></a>00271   <span class="keywordflow">return</span> HTTP_MESSAGE_find_header( &amp;req-&gt;<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>-&gt;base, header_name );
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="a00021.html#gab855f4f9cfbd19c2b3e1548fe0960634">00274</a> M_INLINE STRINGPAIR * <a class="code" href="a00021.html#gab855f4f9cfbd19c2b3e1548fe0960634">HTTP_servlet_first_header</a>( <a class="code" href="a00008.html">HTTP_servlet_request</a> *req, DLISTUNR_position *pos ) { 
<a name="l00275"></a>00275   <span class="keywordflow">return</span> HTTP_MESSAGE_first_header(  &amp;req-&gt;<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>-&gt;base, pos );
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="a00021.html#gab73da37758e0f60bcdc997f59029a199">00278</a> M_INLINE STRINGPAIR * <a class="code" href="a00021.html#gab73da37758e0f60bcdc997f59029a199">HTTP_servlet_next_header</a>( <a class="code" href="a00008.html">HTTP_servlet_request</a> *req, DLISTUNR_position *pos ) { 
<a name="l00279"></a>00279   <span class="keywordflow">return</span> HTTP_MESSAGE_next_header(  &amp;req-&gt;<a class="code" href="a00008.html#a7341bff4e78abe9aa746d6c52e2eaa20">request</a>-&gt;base, pos );
<a name="l00280"></a>00280 }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="a00021.html#ga4280d7a9dc1589c751d6fc44b80a9317">00282</a> M_INLINE DBUF * <a class="code" href="a00021.html#ga4280d7a9dc1589c751d6fc44b80a9317">HTTP_servlet_data</a>( <a class="code" href="a00008.html">HTTP_servlet_request</a> * req ) { 
<a name="l00283"></a>00283   <span class="keywordflow">return</span> req-&gt;<a class="code" href="a00008.html#a427d50a189aafc2db7b033acf64d69ef">request_data</a>;
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 <span class="comment"></span>
<a name="l00286"></a>00286 <span class="comment">/**</span>
<a name="l00287"></a>00287 <span class="comment"> *</span>
<a name="l00288"></a>00288 <span class="comment"> * @}</span>
<a name="l00289"></a>00289 <span class="comment"> */</span>
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment">// =============================================================================================</span>
<a name="l00292"></a>00292 <span class="comment"></span>
<a name="l00293"></a>00293 <span class="comment">/** </span>
<a name="l00294"></a>00294 <span class="comment"> * @defgroup HTTP_servlet_response</span>
<a name="l00295"></a>00295 <span class="comment"> * @ingroup HTTP_SERVLET</span>
<a name="l00296"></a>00296 <span class="comment"> * @brief represents the http response and includes methods to set response header and send the response body.</span>
<a name="l00297"></a>00297 <span class="comment"> * @{</span>
<a name="l00298"></a>00298 <span class="comment"> */</span>
<a name="l00299"></a><a class="code" href="a00009.html">00299</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00009.html">tagHTTP_servlet_response</a> {
<a name="l00300"></a><a class="code" href="a00009.html#aa55ce344b1ed261af07279c567b08d7b">00300</a>   HTTP_RESPONSE <a class="code" href="a00009.html#aa55ce344b1ed261af07279c567b08d7b">response</a>;
<a name="l00301"></a><a class="code" href="a00009.html#acfe932960b95d037da48c87fc27beb79">00301</a>   HTTP_REQUEST *<a class="code" href="a00009.html#acfe932960b95d037da48c87fc27beb79">request</a>;
<a name="l00302"></a><a class="code" href="a00009.html#a6807441c52560f55d6016a13404cd641">00302</a>   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *<a class="code" href="a00009.html#a6807441c52560f55d6016a13404cd641">filter_context</a>; 
<a name="l00303"></a><a class="code" href="a00009.html#a03492116d30e34715724cc33f5fe52e5">00303</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00009.html#a03492116d30e34715724cc33f5fe52e5">data_sent</a>;
<a name="l00304"></a><a class="code" href="a00009.html#a1e5ec22738cccb12b9b3bdcdd431f168">00304</a>   <span class="keywordtype">int</span> <a class="code" href="a00009.html#a1e5ec22738cccb12b9b3bdcdd431f168">state</a>;
<a name="l00305"></a><a class="code" href="a00009.html#aec0c6f890c3a0f47f41c448d609a02aa">00305</a>   BF <a class="code" href="a00009.html#aec0c6f890c3a0f47f41c448d609a02aa">bf</a>;
<a name="l00306"></a><a class="code" href="a00009.html#a6271be8a3acfe1eb86179de567a912f3">00306</a>   <span class="keywordtype">void</span> *<a class="code" href="a00009.html#a6271be8a3acfe1eb86179de567a912f3">chunk_buf</a>;
<a name="l00307"></a><a class="code" href="a00009.html#abf0aa9810763fa4c8edd2d0fbfb1004a">00307</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00009.html#abf0aa9810763fa4c8edd2d0fbfb1004a">chunk_buf_size</a>;
<a name="l00308"></a><a class="code" href="a00009.html#a83454d920f7218661b367f6cd9e3f3f3">00308</a>   <span class="keywordtype">int</span>    <a class="code" href="a00009.html#a83454d920f7218661b367f6cd9e3f3f3">chunk_no</a>;
<a name="l00309"></a>00309 } <a class="code" href="a00022.html#gab6262910a582a4aefa03806e8a9996ad">HTTP_servlet_response</a>;
<a name="l00310"></a>00310 
<a name="l00311"></a><a class="code" href="a00022.html#gacac342618d827f10f920dd5d548967ef">00311</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00312"></a><a class="code" href="a00022.html#ggacac342618d827f10f920dd5d548967efa9661c1d7c74d6eb76b75849ae30b33c6">00312</a>   <a class="code" href="a00022.html#ggacac342618d827f10f920dd5d548967efa9661c1d7c74d6eb76b75849ae30b33c6">RESPONSE_CONNECTION_CLOSE</a>,
<a name="l00313"></a><a class="code" href="a00022.html#ggacac342618d827f10f920dd5d548967efa673a78de2e61f5d56936fc551684d6ee">00313</a>   <a class="code" href="a00022.html#ggacac342618d827f10f920dd5d548967efa673a78de2e61f5d56936fc551684d6ee">RESPONSE_CONTENT_LENGTH</a>,
<a name="l00314"></a><a class="code" href="a00022.html#ggacac342618d827f10f920dd5d548967efacc2acc83b0f66ab290f5f1fe6b940ef7">00314</a>   <a class="code" href="a00022.html#ggacac342618d827f10f920dd5d548967efacc2acc83b0f66ab290f5f1fe6b940ef7">RESPONSE_CHUNKED</a>,
<a name="l00315"></a>00315 } <a class="code" href="a00022.html#gacac342618d827f10f920dd5d548967ef">HTTP_servlet_response_type</a>;
<a name="l00316"></a>00316 <span class="comment"></span>
<a name="l00317"></a>00317 <span class="comment">/**</span>
<a name="l00318"></a>00318 <span class="comment"> * @brief initiate an HTTP response</span>
<a name="l00319"></a>00319 <span class="comment"> */</span>
<a name="l00320"></a>00320 <span class="keywordtype">int</span> <a class="code" href="a00022.html#ga520d40a9fe92a4764f7800a957e74f35" title="initiate an HTTP response">HTTP_response_start</a>( <a class="code" href="a00009.html">HTTP_servlet_response</a> *resp, <span class="keywordtype">int</span> status, <span class="keyword">const</span> <span class="keywordtype">char</span> *mime_type, <a class="code" href="a00022.html#gacac342618d827f10f920dd5d548967ef">HTTP_servlet_response_type</a> rtype, <span class="keywordtype">size_t</span> length  );
<a name="l00321"></a>00321 <span class="comment"></span>
<a name="l00322"></a>00322 <span class="comment">/**</span>
<a name="l00323"></a>00323 <span class="comment"> * @brief send response data when sending RESPONSE_CONTENT_LENGTH or RESPONSE_CONNECTION_CLOSE responses</span>
<a name="l00324"></a>00324 <span class="comment"> *</span>
<a name="l00325"></a>00325 <span class="comment"> * Precondition: HTTP_response_start has been called. and response type is either RESPONSE_CONTENT_LENGTH or RESPONSE_CONNECTION_CLOSE  </span>
<a name="l00326"></a>00326 <span class="comment"> */</span>
<a name="l00327"></a>00327 <span class="keywordtype">int</span> <a class="code" href="a00022.html#gaed8f8e393fd1515d2f544f590c6b1867" title="send response data when sending RESPONSE_CONTENT_LENGTH or RESPONSE_CONNECTION_CLOSE responses...">HTTP_response_send</a>( <a class="code" href="a00009.html">HTTP_servlet_response</a> *resp, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size);
<a name="l00328"></a>00328 <span class="comment"></span>
<a name="l00329"></a>00329 <span class="comment">/**</span>
<a name="l00330"></a>00330 <span class="comment"> * @brief finish sending of response</span>
<a name="l00331"></a>00331 <span class="comment"> *</span>
<a name="l00332"></a>00332 <span class="comment"> */</span>
<a name="l00333"></a>00333 <span class="keywordtype">int</span> <a class="code" href="a00022.html#gafcfed03fea048f6eab98c8b410bcc52c" title="finish sending of response">HTTP_response_finish</a>( <a class="code" href="a00009.html">HTTP_servlet_response</a> *resp );
<a name="l00334"></a>00334 <span class="comment"></span>
<a name="l00335"></a>00335 <span class="comment">/**</span>
<a name="l00336"></a>00336 <span class="comment"> * @brief returns buffer for sending chunks</span>
<a name="l00337"></a>00337 <span class="comment"> * The buffer reserves enough space before start of buffer, in order to allow addition of chunk header before the sent daa</span>
<a name="l00338"></a>00338 <span class="comment"> */</span>
<a name="l00339"></a>00339 BF *<a class="code" href="a00022.html#gac35744637829527c41116ff45b67db37" title="returns buffer for sending chunks The buffer reserves enough space before start of buffer...">HTTP_response_get_chunk_buffer</a>( <a class="code" href="a00009.html">HTTP_servlet_response</a> *resp, <span class="keywordtype">size_t</span> chunk_size );
<a name="l00340"></a>00340 <span class="comment"></span>
<a name="l00341"></a>00341 <span class="comment">/**</span>
<a name="l00342"></a>00342 <span class="comment"> * @brief send chunk from buffer</span>
<a name="l00343"></a>00343 <span class="comment"> * The buffer must reserve enough space for the chunk header, before start of buffer</span>
<a name="l00344"></a>00344 <span class="comment"> *</span>
<a name="l00345"></a>00345 <span class="comment"> * Precondition: HTTP_response_start has been called, and response type is RESPONSE_CHUNKED </span>
<a name="l00346"></a>00346 <span class="comment"> *</span>
<a name="l00347"></a>00347 <span class="comment"> */</span>
<a name="l00348"></a>00348 <span class="keywordtype">int</span> <a class="code" href="a00022.html#gaba723292382fdd7307c5bd25a0370fe5" title="send chunk from buffer The buffer must reserve enough space for the chunk header, before start of buf...">HTTP_response_write_chunk</a>( <a class="code" href="a00009.html">HTTP_servlet_response</a> *resp, BF *bf);
<a name="l00349"></a>00349 <span class="comment"></span>
<a name="l00350"></a>00350 <span class="comment">/**</span>
<a name="l00351"></a>00351 <span class="comment"> *</span>
<a name="l00352"></a>00352 <span class="comment"> * @}</span>
<a name="l00353"></a>00353 <span class="comment"> */</span>
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="comment">// =============================================================================================</span>
<a name="l00357"></a>00357 <span class="comment"></span>
<a name="l00358"></a>00358 <span class="comment">/** </span>
<a name="l00359"></a>00359 <span class="comment"> * @addtogroup HTTP_SERVLET</span>
<a name="l00360"></a>00360 <span class="comment"> *</span>
<a name="l00361"></a>00361 <span class="comment"> * @{</span>
<a name="l00362"></a>00362 <span class="comment"> */</span>
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 <span class="keyword">struct </span><a class="code" href="a00007.html" title="HTTP_SERVLET definition.">tagHTTP_SERVLET</a>;
<a name="l00365"></a>00365 
<a name="l00366"></a><a class="code" href="a00020.html#ga62da94570530db808ca7a449c02142a1">00366</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {<span class="comment"></span>
<a name="l00367"></a>00367 <span class="comment">  /** error occured while servlet instance has handled a request  */</span>
<a name="l00368"></a><a class="code" href="a00020.html#gga62da94570530db808ca7a449c02142a1a0212a1ce85c57b14397e080fe6249e78">00368</a>   <a class="code" href="a00020.html#gga62da94570530db808ca7a449c02142a1a0212a1ce85c57b14397e080fe6249e78">SERVLET_REQUEST_ERROR</a> = -1,    
<a name="l00369"></a>00369 <span class="comment"></span>
<a name="l00370"></a>00370 <span class="comment">  /** the request has been handled by this servlet */</span>
<a name="l00371"></a><a class="code" href="a00020.html#gga62da94570530db808ca7a449c02142a1afe95521ecb510198d8d464d9e0c5d30e">00371</a>   <a class="code" href="a00020.html#gga62da94570530db808ca7a449c02142a1afe95521ecb510198d8d464d9e0c5d30e">SERVLET_REQUEST_HANDLED</a> = 0,  
<a name="l00372"></a>00372   <span class="comment"></span>
<a name="l00373"></a>00373 <span class="comment">  /** the request has not been handled by this servlet */</span>
<a name="l00374"></a><a class="code" href="a00020.html#gga62da94570530db808ca7a449c02142a1a8cc8096ba16a0a241e0a97b15b7c548e">00374</a>   <a class="code" href="a00020.html#gga62da94570530db808ca7a449c02142a1a8cc8096ba16a0a241e0a97b15b7c548e">SERVLET_REQUEST_IGNORED</a> = 1,
<a name="l00375"></a>00375   
<a name="l00376"></a>00376  
<a name="l00377"></a>00377 } <a class="code" href="a00020.html#ga62da94570530db808ca7a449c02142a1">SERVLET_STATUS</a>;
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="a00010.html">00379</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00010.html">tagSERVLET_CONTEXT</a> {<span class="comment"></span>
<a name="l00380"></a>00380 <span class="comment">  /** pointer to servlet */</span>
<a name="l00381"></a><a class="code" href="a00010.html#ac9b7bef690938dfbe412979fd0b499b0">00381</a>   <span class="keyword">struct </span><a class="code" href="a00007.html" title="HTTP_SERVLET definition.">tagHTTP_SERVLET</a> *<a class="code" href="a00010.html#ac9b7bef690938dfbe412979fd0b499b0">servlet</a>;   
<a name="l00382"></a>00382   <span class="comment"></span>
<a name="l00383"></a>00383 <span class="comment">  /** per connection data of servlet */</span>
<a name="l00384"></a><a class="code" href="a00010.html#ae35983e812eaaa475a89740ab5f59be0">00384</a>   <span class="keywordtype">void</span> *<a class="code" href="a00010.html#ae35983e812eaaa475a89740ab5f59be0">connection_ctx</a>;    
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 } <a class="code" href="a00020.html#gafa5034048e2302d8ac319265bbd7351c">SERVLET_CONTEXT</a>;
<a name="l00387"></a>00387 <span class="comment"></span>
<a name="l00388"></a>00388 <span class="comment">/**</span>
<a name="l00389"></a>00389 <span class="comment"> * @brief initialise the servlet instance (optional)</span>
<a name="l00390"></a>00390 <span class="comment"> */</span>
<a name="l00391"></a><a class="code" href="a00020.html#ga975f4529ae9b93d034cd2cf641497485">00391</a> <span class="keyword">typedef</span> int  (* <a class="code" href="a00020.html#ga975f4529ae9b93d034cd2cf641497485" title="initialise the servlet instance (optional)">HTTP_SERVLET_INIT</a>) (<span class="keyword">struct </span><a class="code" href="a00007.html" title="HTTP_SERVLET definition.">tagHTTP_SERVLET</a> *servlet_ctx);
<a name="l00392"></a>00392 <span class="comment"></span>
<a name="l00393"></a>00393 <span class="comment">/**</span>
<a name="l00394"></a>00394 <span class="comment"> * @brief free  the servlet instance (optional)</span>
<a name="l00395"></a>00395 <span class="comment"> */</span>
<a name="l00396"></a><a class="code" href="a00020.html#gac7c9be16ed3aaf3f9bca4df8940014ec">00396</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span> * (* HTTP_SERVLET_FREE) (<span class="keyword">struct </span><a class="code" href="a00007.html" title="HTTP_SERVLET definition.">tagHTTP_SERVLET</a> *servlet_ctx);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 <span class="comment"></span>
<a name="l00400"></a>00400 <span class="comment">/**</span>
<a name="l00401"></a>00401 <span class="comment"> * @brief called to handle an HTTP request</span>
<a name="l00402"></a>00402 <span class="comment"> */</span>
<a name="l00403"></a><a class="code" href="a00020.html#ga8102140c2330dc5e68dde842ffc9382b">00403</a> <span class="keyword">typedef</span> <a class="code" href="a00020.html#ga62da94570530db808ca7a449c02142a1">SERVLET_STATUS</a> ( *<a class="code" href="a00020.html#ga8102140c2330dc5e68dde842ffc9382b" title="called to handle an HTTP request">HTTP_SERVLET_ACTION</a>) ( <a class="code" href="a00008.html">HTTP_servlet_request</a> * request, <a class="code" href="a00009.html">HTTP_servlet_response</a> *response, <a class="code" href="a00010.html">SERVLET_CONTEXT</a> *context );
<a name="l00404"></a>00404 <span class="comment"></span>
<a name="l00405"></a>00405 <span class="comment">/**</span>
<a name="l00406"></a>00406 <span class="comment"> * @brief called when socket connection is closed.</span>
<a name="l00407"></a>00407 <span class="comment"> */</span>
<a name="l00408"></a><a class="code" href="a00020.html#gabc39eec6dfe7967a1adb13ad5f3073c1">00408</a> <span class="keyword">typedef</span> void   ( *<a class="code" href="a00020.html#gabc39eec6dfe7967a1adb13ad5f3073c1" title="called when socket connection is closed.">HTTP_SERVLET_FREE_CONNECTION</a>) ( <a class="code" href="a00010.html">SERVLET_CONTEXT</a> *contextx ); 
<a name="l00409"></a>00409 <span class="comment"></span>
<a name="l00410"></a>00410 <span class="comment">/**</span>
<a name="l00411"></a>00411 <span class="comment"> * @brief HTTP_SERVLET definition</span>
<a name="l00412"></a>00412 <span class="comment"> */</span>
<a name="l00413"></a><a class="code" href="a00007.html">00413</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00007.html" title="HTTP_SERVLET definition.">tagHTTP_SERVLET</a> {
<a name="l00414"></a><a class="code" href="a00007.html#ae6a2bc9b9e2e7f7f00aab9b42ac237b0">00414</a>   <a class="code" href="a00020.html#ga975f4529ae9b93d034cd2cf641497485" title="initialise the servlet instance (optional)">HTTP_SERVLET_INIT</a>             <a class="code" href="a00007.html#ae6a2bc9b9e2e7f7f00aab9b42ac237b0">init_servlet</a>;
<a name="l00415"></a><a class="code" href="a00007.html#aeafcac3e6df66e734b92cc8d3c6e349a">00415</a>   <a class="code" href="a00020.html#gac7c9be16ed3aaf3f9bca4df8940014ec" title="free the servlet instance (optional)">HTTP_SERVLET_FREE</a>             <a class="code" href="a00007.html#aeafcac3e6df66e734b92cc8d3c6e349a">free_servlet</a>;
<a name="l00416"></a><a class="code" href="a00007.html#ac176bbe2e49c194f8cee4f5a7ad4b855">00416</a>   <a class="code" href="a00020.html#ga8102140c2330dc5e68dde842ffc9382b" title="called to handle an HTTP request">HTTP_SERVLET_ACTION</a>           <a class="code" href="a00007.html#ac176bbe2e49c194f8cee4f5a7ad4b855">servlet_action</a>;
<a name="l00417"></a><a class="code" href="a00007.html#a567b7d99882c8714c6a30ab41de0644a">00417</a>   <a class="code" href="a00020.html#gabc39eec6dfe7967a1adb13ad5f3073c1" title="called when socket connection is closed.">HTTP_SERVLET_FREE_CONNECTION</a>  <a class="code" href="a00007.html#a567b7d99882c8714c6a30ab41de0644a">free_connection</a>;
<a name="l00418"></a>00418  
<a name="l00419"></a>00419 } <a class="code" href="a00020.html#ga27483d4166ac0bb9f9ca255b1e130ee4" title="HTTP_SERVLET definition.">HTTP_SERVLET</a>;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 
<a name="l00422"></a><a class="code" href="a00020.html#gad976ddbc939f4eeedd9202e83743a110">00422</a> M_INLINE <span class="keywordtype">void</span> <a class="code" href="a00020.html#gad976ddbc939f4eeedd9202e83743a110">HTTP_SERVLET_init</a>( <a class="code" href="a00007.html" title="HTTP_SERVLET definition.">HTTP_SERVLET</a> *servlet, <a class="code" href="a00020.html#ga975f4529ae9b93d034cd2cf641497485" title="initialise the servlet instance (optional)">HTTP_SERVLET_INIT</a> init_servlet, <a class="code" href="a00020.html#gac7c9be16ed3aaf3f9bca4df8940014ec" title="free the servlet instance (optional)">HTTP_SERVLET_FREE</a> free_servlet, <a class="code" href="a00020.html#ga8102140c2330dc5e68dde842ffc9382b" title="called to handle an HTTP request">HTTP_SERVLET_ACTION</a>  servlet_action, <a class="code" href="a00020.html#gabc39eec6dfe7967a1adb13ad5f3073c1" title="called when socket connection is closed.">HTTP_SERVLET_FREE_CONNECTION</a> free_connection )
<a name="l00423"></a>00423 {
<a name="l00424"></a>00424   servlet-&gt;<a class="code" href="a00007.html#ae6a2bc9b9e2e7f7f00aab9b42ac237b0">init_servlet</a> = init_servlet;
<a name="l00425"></a>00425   servlet-&gt;<a class="code" href="a00007.html#aeafcac3e6df66e734b92cc8d3c6e349a">free_servlet</a> = free_servlet;
<a name="l00426"></a>00426   servlet-&gt;<a class="code" href="a00007.html#ac176bbe2e49c194f8cee4f5a7ad4b855">servlet_action</a> = servlet_action;
<a name="l00427"></a>00427   servlet-&gt;<a class="code" href="a00007.html#a567b7d99882c8714c6a30ab41de0644a">free_connection</a> = free_connection;
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 <span class="comment"></span>
<a name="l00430"></a>00430 <span class="comment">/**</span>
<a name="l00431"></a>00431 <span class="comment"> * @}</span>
<a name="l00432"></a>00432 <span class="comment"> */</span>
<a name="l00433"></a>00433 
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 <span class="comment">// =============================================================================================</span>
<a name="l00436"></a>00436 <span class="comment"></span>
<a name="l00437"></a>00437 <span class="comment">/**</span>
<a name="l00438"></a>00438 <span class="comment"> * @defgroup  WEBBYCFG   </span>
<a name="l00439"></a>00439 <span class="comment"> * @brief embedded web server configuration</span>
<a name="l00440"></a>00440 <span class="comment"> *</span>
<a name="l00441"></a>00441 <span class="comment"> * @{</span>
<a name="l00442"></a>00442 <span class="comment"> */</span>
<a name="l00443"></a>00443 
<a name="l00444"></a><a class="code" href="a00014.html">00444</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00014.html">tagWEBBY_CONFIG</a> {
<a name="l00445"></a>00445   <span class="comment"></span>
<a name="l00446"></a>00446 <span class="comment">  /** listening address */</span>
<a name="l00447"></a><a class="code" href="a00014.html#ac08ad021d1c64e9eac9c34043087efa4">00447</a>   SOCKADDR <a class="code" href="a00014.html#ac08ad021d1c64e9eac9c34043087efa4">listening_address</a>;        
<a name="l00448"></a>00448   <span class="comment"></span>
<a name="l00449"></a>00449 <span class="comment">  /** listen(2) backlog parameter */</span>
<a name="l00450"></a><a class="code" href="a00014.html#a72e5080306e25c54fc7f881ba9eb2a77">00450</a>   <span class="keywordtype">int</span> <a class="code" href="a00014.html#a72e5080306e25c54fc7f881ba9eb2a77">listen_backlog</a>;                
<a name="l00451"></a>00451   <span class="comment"></span>
<a name="l00452"></a>00452 <span class="comment">  /** socket buffer size, in bytes, for each client connection (both receive and send buffer sizes) */</span>
<a name="l00453"></a><a class="code" href="a00014.html#a4119ff3548a22f691d93075d038ea394">00453</a>   <span class="keywordtype">int</span> <a class="code" href="a00014.html#a4119ff3548a22f691d93075d038ea394">socket_buffer_size</a>;            
<a name="l00454"></a>00454   <span class="comment"></span>
<a name="l00455"></a>00455 <span class="comment">  /** maximum number of connections supported at the same time */</span>
<a name="l00456"></a><a class="code" href="a00014.html#ab5f7d664cacb890429d2a91bf3d3c981">00456</a>   <span class="keywordtype">int</span> <a class="code" href="a00014.html#ab5f7d664cacb890429d2a91bf3d3c981">max_connections</a>;               
<a name="l00457"></a>00457   <span class="comment"></span>
<a name="l00458"></a>00458 <span class="comment">  /** read / write timeout in seconds. */</span>
<a name="l00459"></a><a class="code" href="a00014.html#a3e3dd5f074987dbfaa3ba0d931308191">00459</a>   <span class="keywordtype">int</span> <a class="code" href="a00014.html#a3e3dd5f074987dbfaa3ba0d931308191">io_timeout</a>;                    
<a name="l00460"></a>00460   <span class="comment"></span>
<a name="l00461"></a>00461 <span class="comment">  /** idle timeout in seconds - if connection that inactive for more than this value between requests then connection will be close */</span>
<a name="l00462"></a><a class="code" href="a00014.html#a921222dc1522dd04b5c46e157816c839">00462</a>   <span class="keywordtype">int</span> <a class="code" href="a00014.html#a921222dc1522dd04b5c46e157816c839">idle_timeout</a>;                  
<a name="l00463"></a>00463   <span class="comment"></span>
<a name="l00464"></a>00464 <span class="comment">  /** pages per thread */</span>
<a name="l00465"></a><a class="code" href="a00014.html#a1c36a6ce7610fcb73a1fdcd36a75dbb0">00465</a>   <span class="keywordtype">int</span> <a class="code" href="a00014.html#a1c36a6ce7610fcb73a1fdcd36a75dbb0">stack_pages_per_thread</a>;      
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 } <a class="code" href="a00023.html#ga2d5924aae79394b4e89cde3debdc44bb">WEBBY_CONFIG</a>;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 <span class="keywordtype">int</span> <a class="code" href="a00023.html#ga107523da95cf41a0ff405131f32277cc">WEBBY_CONFIG_load</a>( <a class="code" href="a00014.html">WEBBY_CONFIG</a> *cfg, <span class="keyword">const</span> <span class="keywordtype">char</span> *file);
<a name="l00470"></a>00470 <span class="comment"></span>
<a name="l00471"></a>00471 <span class="comment">/**</span>
<a name="l00472"></a>00472 <span class="comment"> * @}</span>
<a name="l00473"></a>00473 <span class="comment"> */</span>
<a name="l00474"></a>00474 
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 <span class="comment">// =============================================================================================</span>
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 <span class="keyword">struct </span><a class="code" href="a00011.html">tagSERVLET_RUNNER_FILTER</a>;
<a name="l00479"></a>00479 <span class="comment"></span>
<a name="l00480"></a>00480 <span class="comment">/** </span>
<a name="l00481"></a>00481 <span class="comment"> * @defgroup WEBBY </span>
<a name="l00482"></a>00482 <span class="comment"> * @brief embedded web server facade class.</span>
<a name="l00483"></a>00483 <span class="comment"> * </span>
<a name="l00484"></a>00484 <span class="comment"> * @{</span>
<a name="l00485"></a>00485 <span class="comment"> */</span>
<a name="l00486"></a><a class="code" href="a00013.html">00486</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00013.html">tagWEBBY</a> {<span class="comment"></span>
<a name="l00487"></a>00487 <span class="comment">  /** implementation object used to send / receive data on connection */</span>
<a name="l00488"></a><a class="code" href="a00013.html#ad0a59cc3f69711b8680cd0f230690a1e">00488</a>   <span class="keywordtype">void</span> *<a class="code" href="a00013.html#ad0a59cc3f69711b8680cd0f230690a1e">impl</a>;                         
<a name="l00489"></a>00489   <span class="comment"></span>
<a name="l00490"></a>00490 <span class="comment">  /** precompouted filter context layout - copied for each new connection */</span>
<a name="l00491"></a><a class="code" href="a00013.html#a56aa9a4e875902f86bd47750212b8086">00491</a>   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *<a class="code" href="a00013.html#a56aa9a4e875902f86bd47750212b8086">filter_ctx_layout</a>;  
<a name="l00492"></a>00492  <span class="comment"></span>
<a name="l00493"></a>00493 <span class="comment">  /** size of filter context layoyt */</span>
<a name="l00494"></a><a class="code" href="a00013.html#aa4cb9fe479dec9c565bcd00cea19efac">00494</a>   <span class="keywordtype">size_t</span>          <a class="code" href="a00013.html#aa4cb9fe479dec9c565bcd00cea19efac">filter_ctx_layout_size</a>;       
<a name="l00495"></a>00495   <span class="comment"></span>
<a name="l00496"></a>00496 <span class="comment">  /** all filters, all of them */</span>
<a name="l00497"></a><a class="code" href="a00013.html#a8f09ca4fc1921b78808787b500de0431">00497</a>   ARRAY <a class="code" href="a00013.html#a8f09ca4fc1921b78808787b500de0431">filters</a>;                     
<a name="l00498"></a>00498   <span class="comment"></span>
<a name="l00499"></a>00499 <span class="comment">  /** the filter that runs servlets */</span>
<a name="l00500"></a><a class="code" href="a00013.html#a9e287b121c1bc10c198ea22702046392">00500</a>   <span class="keyword">struct </span><a class="code" href="a00011.html">tagSERVLET_RUNNER_FILTER</a> * <a class="code" href="a00013.html#a9e287b121c1bc10c198ea22702046392">servlet_runner_filter</a>;   
<a name="l00501"></a>00501   
<a name="l00502"></a><a class="code" href="a00013.html#af61d4b5e954a75d0d84bd45b10eb4940">00502</a>   <span class="keyword">struct </span><a class="code" href="a00003.html">tagDATA_SINK_FILTER</a> * <a class="code" href="a00013.html#af61d4b5e954a75d0d84bd45b10eb4940">sink_filter</a>;
<a name="l00503"></a>00503 <span class="comment"></span>
<a name="l00504"></a>00504 <span class="comment">  /** configuration */</span>
<a name="l00505"></a><a class="code" href="a00013.html#a96c8c9fff19088327c9ab5a3b7938ccb">00505</a>   <a class="code" href="a00014.html">WEBBY_CONFIG</a> *<a class="code" href="a00013.html#a96c8c9fff19088327c9ab5a3b7938ccb">cfg</a>;                  
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 } <a class="code" href="a00024.html#ga6893c7f44d85f08f5773cadab1d883e7">WEBBY</a>;
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 <a class="code" href="a00013.html">WEBBY</a> *<a class="code" href="a00024.html#ga24e0938463669691db76aa3a2aba418e">WEBBY_init</a>( <a class="code" href="a00014.html">WEBBY_CONFIG</a> * );
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 <span class="keywordtype">int</span> <a class="code" href="a00024.html#ga294920c6df652655a63a9cd5c368a09f">WEBBY_add_vhost</a>( <a class="code" href="a00013.html">WEBBY</a> *<a class="code" href="a00003.html#a66f3bc5acdb299a761b3a4e163636ba6">server</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *host, <span class="keywordtype">int</span> port_num, <span class="keywordtype">size_t</span> * vhost_idx );
<a name="l00513"></a>00513 
<a name="l00514"></a>00514 <span class="keywordtype">int</span> <a class="code" href="a00024.html#ga63d8c8d948713ccf37e92513e926d8b5">WEBBY_add_filter</a>(  <a class="code" href="a00013.html">WEBBY</a> *<a class="code" href="a00003.html#a66f3bc5acdb299a761b3a4e163636ba6">server</a>, <span class="keywordtype">size_t</span> vhost_idx, <a class="code" href="a00006.html" title="http filter definition">HTTP_FILTER</a> *filter );
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 <span class="keywordtype">int</span> <a class="code" href="a00024.html#ga6bcdf0577f33a202169d2df9fb2f782d">WEBBY_add_servlet</a>( <a class="code" href="a00013.html">WEBBY</a> *<a class="code" href="a00003.html#a66f3bc5acdb299a761b3a4e163636ba6">server</a>, <a class="code" href="a00007.html" title="HTTP_SERVLET definition.">HTTP_SERVLET</a> *servlet );  
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 <span class="keywordtype">int</span> <a class="code" href="a00024.html#gad219e92389c7104756b0955e39f395a8">WEBBY_run</a>( <a class="code" href="a00013.html">WEBBY</a> *<a class="code" href="a00003.html#a66f3bc5acdb299a761b3a4e163636ba6">server</a> );
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 <span class="keywordtype">int</span> <a class="code" href="a00024.html#ga2fff1941b52b1eba9ded25079ecc3c6a">WEBBY_shutdown</a>( <a class="code" href="a00013.html">WEBBY</a> *<a class="code" href="a00003.html#a66f3bc5acdb299a761b3a4e163636ba6">server</a> );
<a name="l00521"></a>00521 
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="a00024.html#ga6216ff348213b42b05175fdda1b9398f">00523</a> <span class="preprocessor">#define HTTP_PARSER_BUFFER_SIZE 4096</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span>
<a name="l00525"></a><a class="code" href="a00015.html">00525</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00015.html">tagWEBBY_CONNECTION</a> {
<a name="l00526"></a><a class="code" href="a00015.html#a9d34617f3451ac32315d1223cdd56a36">00526</a>   <span class="keywordtype">void</span> *<a class="code" href="a00015.html#a9d34617f3451ac32315d1223cdd56a36">in_buf_data</a>;
<a name="l00527"></a><a class="code" href="a00015.html#abe2bc97a98ec04b90f63ace8b4ec22ee">00527</a>   BF <a class="code" href="a00015.html#abe2bc97a98ec04b90f63ace8b4ec22ee">in_buf</a>;
<a name="l00528"></a><a class="code" href="a00015.html#aa6ca489e0ea2b39fd9eda1f048da4f3b">00528</a>   HTTP_REQUEST_PARSER <a class="code" href="a00015.html#aa6ca489e0ea2b39fd9eda1f048da4f3b">request_parser</a>;
<a name="l00529"></a><a class="code" href="a00015.html#a0fd47114cffc5512054c650d2e931fee">00529</a>   HTTP_REQUEST <a class="code" href="a00015.html#a0fd47114cffc5512054c650d2e931fee">request</a>;
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="a00015.html#a981014b88d204a0872d9943cd6dccb9a">00531</a>   <a class="code" href="a00005.html" title="structure is passed to filter function as argument.">FILTER_CONTEXT</a> *<a class="code" href="a00015.html#a981014b88d204a0872d9943cd6dccb9a">filter_data</a>;  
<a name="l00532"></a><a class="code" href="a00015.html#a432d09002a99af37052a7d40de7db432">00532</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00015.html#a432d09002a99af37052a7d40de7db432">num_filters</a>;
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 } <a class="code" href="a00024.html#ga4db9caaa37abab15b82e31e56f5a363a">WEBBY_CONNECTION</a>;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 <a class="code" href="a00015.html">WEBBY_CONNECTION</a> *<a class="code" href="a00024.html#ga468f7c2a048c111edea76276865b0f11">WEBBY_new_connection</a>( <a class="code" href="a00013.html">WEBBY</a> *server, <span class="keywordtype">void</span> *implconndata );
<a name="l00537"></a>00537 <span class="keywordtype">int</span> <a class="code" href="a00024.html#ga80d94011f2e61e29fd041437c6dbdf17">WEBBY_connection_data_received</a>( <a class="code" href="a00015.html">WEBBY_CONNECTION</a> * connection );
<a name="l00538"></a>00538 <span class="keywordtype">void</span> <a class="code" href="a00024.html#ga000431a1b99da08f5711e788533ce0e2">WEBBY_connection_close</a>( <a class="code" href="a00015.html">WEBBY_CONNECTION</a> * connection  );
<a name="l00539"></a>00539 <span class="comment"></span>
<a name="l00540"></a>00540 <span class="comment">/**</span>
<a name="l00541"></a>00541 <span class="comment"> * @}</span>
<a name="l00542"></a>00542 <span class="comment"> */</span>
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 <span class="preprocessor">#endif</span>
<a name="l00545"></a>00545 <span class="preprocessor"></span>
<a name="l00546"></a>00546 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Oct 25 2011 00:52:52 for WEBBY - the embedded web server with many faces / objects in plain C by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
