<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simple data structures / objects in plain C: util.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simple data structures / objects in plain C&#160;<span id="projectnumber">Snapshot</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">util.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="a00015_source.html">cutils/base.h</a>&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
</div>
<p><a href="a00035_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a0274ebef917fc3eab099d48a7b1d6d40">UTIL_swapbytes</a> (unsigned char *src, unsigned char *dst, size_t size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a6880ce12ecc30a2745b3f38695084295">UTIL_is_power_of_two</a> (uint32_t num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a3eb8ff3c6b6f4d57041c392fadaeb247">UTIL_align</a> (uint32_t num, uint32_t align)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a72e25095046c84ed9c97031ca8a345b2">UTIL_ptr_align</a> (void *ptr, size_t align)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#ad9e29ba5ed5215ce47a18b3fd195b2c6">UTIL_ptr_page_start</a> (void *ptr, size_t page_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#aec4a23e0db37c75ecd6ac13dc58eb431">UTIL_ptr_is_aligned</a> (void *ptr, size_t page_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a96499778bf3317f2514da193548a748d">UTIL_ptr_in_range</a> (void *ptr, void *from, void *to)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a191e663cb1cc920f6b50f17567ea8c5c">UTIL_round_to_power_of_n</a> (size_t num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#ae3076057de2f9b1fcb084284a73037df">UTIL_log_base_2_of_n</a> (size_t num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a0f8d2184dce7443c70508dc31f786849">UTIL_skip_spaces</a> (const char *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">M_INLINE char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#a08de89165d6c4a729e3ff056a9736da6">UTIL_skip_nspace</a> (const char *p)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3eb8ff3c6b6f4d57041c392fadaeb247"></a><!-- doxytag: member="util.h::UTIL_align" ref="a3eb8ff3c6b6f4d57041c392fadaeb247" args="(uint32_t num, uint32_t align)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE uint32_t UTIL_align </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>align</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00043">43</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assert( UTIL_is_power_of_two( align ) ); */</span>
        <span class="keywordflow">return</span> (num  + align - 1 ) &amp; (~(align - 1));
        <span class="comment">/*</span>
<span class="comment">         * &amp; (x) (~(align -1 )) set align to the closers alignment (x % align == 0) (round down to closest alignment)</span>
<span class="comment">         * num + align - 1      make sure that the argument crosses alignment border, </span>
<span class="comment">         */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6880ce12ecc30a2745b3f38695084295"></a><!-- doxytag: member="util.h::UTIL_is_power_of_two" ref="a6880ce12ecc30a2745b3f38695084295" args="(uint32_t num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE int UTIL_is_power_of_two </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00031">31</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> (num &amp; (num - 1)) == 0;
        <span class="comment">/* num == 2 ^ n -1 | all ones</span>
<span class="comment">         * num == 2 ^ n    | one on next position after the last one.</span>
<span class="comment">         * &amp; will return 0 (no overlap) if num is 2 ^ n</span>
<span class="comment">         */</span>
}       
</pre></div>
</div>
</div>
<a class="anchor" id="ae3076057de2f9b1fcb084284a73037df"></a><!-- doxytag: member="util.h::UTIL_log_base_2_of_n" ref="ae3076057de2f9b1fcb084284a73037df" args="(size_t num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE size_t UTIL_log_base_2_of_n </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00101">101</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span> ret = 0;

        <span class="keywordflow">while</span>( num ) {
                num &gt;&gt;= 1;
                ret ++;
        }
        <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a72e25095046c84ed9c97031ca8a345b2"></a><!-- doxytag: member="util.h::UTIL_ptr_align" ref="a72e25095046c84ed9c97031ca8a345b2" args="(void *ptr, size_t align)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void* UTIL_ptr_align </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>align</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00056">56</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assert( UTIL_is_power_of_two( align ) ); */</span>
        <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *) ( (((ptrdiff_t) ptr) &amp; ~(align - 1)) + align );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a96499778bf3317f2514da193548a748d"></a><!-- doxytag: member="util.h::UTIL_ptr_in_range" ref="a96499778bf3317f2514da193548a748d" args="(void *ptr, void *from, void *to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE int UTIL_ptr_in_range </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00085">85</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">return</span> (uint8_t *) ptr &gt;= (uint8_t *) from &amp;&amp; (uint8_t *) ptr &lt; (uint8_t *) to;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec4a23e0db37c75ecd6ac13dc58eb431"></a><!-- doxytag: member="util.h::UTIL_ptr_is_aligned" ref="aec4a23e0db37c75ecd6ac13dc58eb431" args="(void *ptr, size_t page_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE int UTIL_ptr_is_aligned </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>page_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00076">76</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assert( UTIL_is_power_of_two( align ) ); */</span>
        <span class="keywordflow">return</span> ( ((ptrdiff_t) ptr) &amp; ((ptrdiff_t) page_size - 1) ) == 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad9e29ba5ed5215ce47a18b3fd195b2c6"></a><!-- doxytag: member="util.h::UTIL_ptr_page_start" ref="ad9e29ba5ed5215ce47a18b3fd195b2c6" args="(void *ptr, size_t page_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void* UTIL_ptr_page_start </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>page_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00064">64</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">/* assert( UTIL_is_power_of_two( align ) ); */</span>
        <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *) ( ((ptrdiff_t) ptr) &amp; ~ ((ptrdiff_t) page_size - 1) );
        <span class="comment">/*</span>
<span class="comment">         * round argument pointer down to the closes pagesize (assuming pagesize is power of two)</span>
<span class="comment">         */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a191e663cb1cc920f6b50f17567ea8c5c"></a><!-- doxytag: member="util.h::UTIL_round_to_power_of_n" ref="a191e663cb1cc920f6b50f17567ea8c5c" args="(size_t num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE size_t UTIL_round_to_power_of_n </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00091">91</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">size_t</span> n = 1;

        <span class="keywordflow">while</span>( n &lt; num ) {
                n &lt;&lt;= 1;
        }
        <span class="keywordflow">return</span> n;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08de89165d6c4a729e3ff056a9736da6"></a><!-- doxytag: member="util.h::UTIL_skip_nspace" ref="a08de89165d6c4a729e3ff056a9736da6" args="(const char *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE char* UTIL_skip_nspace </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00121">121</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
        <span class="keywordflow">while</span>( *p != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; !isspace((<span class="keywordtype">int</span>) *p)) {
                ++p;
        }
        <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *) p;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f8d2184dce7443c70508dc31f786849"></a><!-- doxytag: member="util.h::UTIL_skip_spaces" ref="a0f8d2184dce7443c70508dc31f786849" args="(const char *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE char* UTIL_skip_spaces </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00114">114</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
        <span class="keywordflow">while</span>( *p != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; isspace((<span class="keywordtype">int</span>) *p)) {
                ++p;
        }
        <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *) p;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0274ebef917fc3eab099d48a7b1d6d40"></a><!-- doxytag: member="util.h::UTIL_swapbytes" ref="a0274ebef917fc3eab099d48a7b1d6d40" args="(unsigned char *src, unsigned char *dst, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M_INLINE void UTIL_swapbytes </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="a00035_source.html#l00013">13</a> of file <a class="el" href="a00035_source.html">util.h</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> tmp;

        <span class="keywordflow">while</span>(size&gt;0) {
                tmp = *src;
                *src = *dst;
                *dst = tmp;

                ++src;
                ++dst;
                --size;
        }
}
</pre></div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Sep 14 2011 20:05:44 for Simple data structures / objects in plain C by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
