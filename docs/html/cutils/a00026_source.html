<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simple data structures / objects in plain C: dlistunr.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Simple data structures / objects in plain C&#160;<span id="projectnumber">Snapshot</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">dlistunr.h</div>  </div>
</div>
<div class="contents">
<a href="a00026.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _DLISTUNR_H_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _DLISTUNR_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#ifdef  __cplusplus</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00006"></a>00006 <span class="preprocessor">#endif</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;<a class="code" href="a00018.html">cutils/base.h</a>&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;<a class="code" href="a00028.html">cutils/dring.h</a>&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 
<a name="l00014"></a><a class="code" href="a00011.html">00014</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="a00011.html">tagDLISTUNR_entry</a> {
<a name="l00015"></a><a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">00015</a>   <a class="code" href="a00012.html">DRING</a>  <a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>;  
<a name="l00016"></a><a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">00016</a>   <span class="keywordtype">size_t</span> <a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a>;
<a name="l00017"></a><a class="code" href="a00047.html#ga0d7c4fdd75e4ee98f34e8e428291d1fc">00017</a>   uint8_t <a class="code" href="a00047.html#ga0d7c4fdd75e4ee98f34e8e428291d1fc">buffer</a>[];
<a name="l00018"></a>00018 } <a class="code" href="a00026.html#a38f170641dce031e340421be84922a5d">DLISTUNR_entry</a>;
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="comment"></span>
<a name="l00022"></a>00022 <span class="comment">/**</span>
<a name="l00023"></a>00023 <span class="comment"> * @defgroup DLISTUNR</span>
<a name="l00024"></a>00024 <span class="comment"> * @brief unrolled list where each list node contains an array of nodes.</span>
<a name="l00025"></a>00025 <span class="comment"> * Unlike other lists here, each element in a list is of the same size.</span>
<a name="l00026"></a>00026 <span class="comment"></span>
<a name="l00027"></a>00027 <span class="comment"> * an unrolled linked list is a variation on the linked list which stores multiple </span>
<a name="l00028"></a>00028 <span class="comment"> * elements in each node. It can drastically increase cache performance, </span>
<a name="l00029"></a>00029 <span class="comment"> * while decreasing the memory overhead associated with storing links to other list elements.. </span>
<a name="l00030"></a>00030 <span class="comment"> *</span>
<a name="l00031"></a>00031 <span class="comment"> * Each node holds up to a certain maximum number of elements, typically just large </span>
<a name="l00032"></a>00032 <span class="comment"> * enough so that the node fills a single cache line or a small multiple thereof. </span>
<a name="l00033"></a>00033 <span class="comment"> * A position in the list is indicated by both a reference to the node and a position </span>
<a name="l00034"></a>00034 <span class="comment"> * in the elements array. It&#39;s also possible to include a previous pointer for an unrolled </span>
<a name="l00035"></a>00035 <span class="comment"> * doubly-linked linked list.</span>
<a name="l00036"></a>00036 <span class="comment"> * Quoted from http://en.wikipedia.org/wiki/Unrolled_linked_list</span>
<a name="l00037"></a>00037 <span class="comment"> *</span>
<a name="l00038"></a>00038 <span class="comment"> * @{</span>
<a name="l00039"></a>00039 <span class="comment"> */</span>
<a name="l00040"></a><a class="code" href="a00003.html">00040</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">00042</a>         <span class="keywordtype">size_t</span> <a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">elmsize</a>;                 <span class="comment">/* size of element */</span>
<a name="l00043"></a><a class="code" href="a00047.html#gada6452d1a52bb049d90bfaba44a88b3c">00043</a>         <span class="keywordtype">size_t</span> <a class="code" href="a00047.html#gada6452d1a52bb049d90bfaba44a88b3c">elmmaxcount</a>;             <span class="comment">/* number of elements in one entry */</span>
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">00045</a>         <span class="keywordtype">size_t</span> <a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a>;                <span class="comment">/* size of elements in list (global) */</span>
<a name="l00046"></a><a class="code" href="a00047.html#ga384be6ddd260b20b9b6060579e53e78b">00046</a>         <span class="keywordtype">size_t</span> <a class="code" href="a00047.html#ga384be6ddd260b20b9b6060579e53e78b">entrycount</a>;              <span class="comment">/* number of entries */</span>
<a name="l00047"></a>00047 
<a name="l00048"></a><a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">00048</a>         <a class="code" href="a00011.html">DLISTUNR_entry</a> <a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 }
<a name="l00051"></a>00051         <a class="code" href="a00003.html">DLISTUNR</a>;
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="a00047.html#ga0f32e9881b86c7ddab83041de9f6888c">00053</a> <span class="keyword">typedef</span> void (*<a class="code" href="a00047.html#ga0f32e9881b86c7ddab83041de9f6888c">DLISTUNR_VISITOR_V</a>)(<a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">void</span> *entry, <span class="keywordtype">void</span> *context);
<a name="l00054"></a><a class="code" href="a00047.html#gaab1a298e92d3537d3d99fb3026fa8878">00054</a> <span class="keyword">typedef</span> int  (*<a class="code" href="a00047.html#gaab1a298e92d3537d3d99fb3026fa8878">DLISTUNR_VISITOR</a>)  (<a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">void</span> *entry, <span class="keywordtype">void</span> *context);
<a name="l00055"></a>00055 <span class="comment"></span>
<a name="l00056"></a>00056 <span class="comment">/**</span>
<a name="l00057"></a>00057 <span class="comment"> * Current position of iteration through an unrolled linked list structure.</span>
<a name="l00058"></a>00058 <span class="comment"> */</span>
<a name="l00059"></a><a class="code" href="a00004.html">00059</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00060"></a><a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">00060</a>         <a class="code" href="a00011.html">DLISTUNR_entry</a> *<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>;
<a name="l00061"></a><a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">00061</a>         <span class="keywordtype">size_t</span>                            <a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a>;
<a name="l00062"></a>00062 } <a class="code" href="a00004.html">DLISTUNR_position</a>;
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment"></span>
<a name="l00065"></a>00065 <span class="comment">/**</span>
<a name="l00066"></a>00066 <span class="comment"> * @brief initialises a new unrolled list. List entries are all of a fixed size.</span>
<a name="l00067"></a>00067 <span class="comment"> * @param ctx (in) allocator interface. (if null we are using the default allocator)</span>
<a name="l00068"></a>00068 <span class="comment"> * @param list (in) object that is initialised</span>
<a name="l00069"></a>00069 <span class="comment"> * @param elmsize (in) size of one element in list.</span>
<a name="l00070"></a>00070 <span class="comment"> * @param elmmaxcount (in) number of element stored in one list entry</span>
<a name="l00071"></a>00071 <span class="comment"> */</span>
<a name="l00072"></a><a class="code" href="a00047.html#ga2030d9ff4e1c5e8b4cbd74590b93d8ce">00072</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span>    <a class="code" href="a00047.html#ga2030d9ff4e1c5e8b4cbd74590b93d8ce" title="initialises a new unrolled list. List entries are all of a fixed size.">DLISTUNR_init</a>(  <a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">size_t</span> elmsize, <span class="keywordtype">size_t</span> elmmaxcount)
<a name="l00073"></a>00073 {       
<a name="l00074"></a>00074         list-&gt;<a class="code" href="a00047.html#gada6452d1a52bb049d90bfaba44a88b3c">elmmaxcount</a> = elmmaxcount;
<a name="l00075"></a>00075         list-&gt;<a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">elmsize</a> = elmsize;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077         list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a> = list-&gt;<a class="code" href="a00047.html#ga384be6ddd260b20b9b6060579e53e78b">entrycount</a> = 0;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         <a class="code" href="a00048.html#gaea5e890f7d1dab572fe3ef6f067e5d26" title="initialises an empty list head">DRING_init</a>( &amp;list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a> );
<a name="l00080"></a>00080         list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a> = (size_t) -1;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         <span class="keywordflow">return</span> 0;
<a name="l00083"></a>00083 }
<a name="l00084"></a>00084 <span class="comment"></span>
<a name="l00085"></a>00085 <span class="comment">/**</span>
<a name="l00086"></a>00086 <span class="comment"> * @brief check validity of unrolled list instance</span>
<a name="l00087"></a>00087 <span class="comment"> * @param list the object</span>
<a name="l00088"></a>00088 <span class="comment"> * @return 0 if list is invalid.</span>
<a name="l00089"></a>00089 <span class="comment"> */</span>
<a name="l00090"></a><a class="code" href="a00047.html#gafd9592650b47d236f472a4a9eb5b115b">00090</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#gafd9592650b47d236f472a4a9eb5b115b" title="check validity of unrolled list instance">DLISTUNR_check</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list)
<a name="l00091"></a>00091 {
<a name="l00092"></a>00092         <span class="keywordtype">size_t</span> elmcount, size = 0;
<a name="l00093"></a>00093         <span class="keywordtype">size_t</span> cursize = 0;
<a name="l00094"></a>00094         <a class="code" href="a00012.html">DRING</a> *cur,*next;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096         <span class="keywordflow">if</span> (list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a> != (<span class="keywordtype">size_t</span>) -1) {
<a name="l00097"></a>00097                 <span class="keywordflow">return</span> 0;
<a name="l00098"></a>00098         }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100         <a class="code" href="a00048.html#gac8118521928cd5a00b83ee9c0ba48308" title="Macro for iterate over all elements of a list, the list is traversed in forward direction from first ...">DRING_FOREACH</a>( cur, &amp;list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>)   {
<a name="l00101"></a>00101 
<a name="l00102"></a>00102                 next = cur-&gt;<a class="code" href="a00012.html#aec13745a49e3ff2cd72745c0ff3e4e45">next</a>;
<a name="l00103"></a>00103                 <span class="keywordflow">if</span> (!next || next-&gt;<a class="code" href="a00012.html#a8f2313e1ce7ba8c157ce612faad73aad">prev</a> != cur) {               
<a name="l00104"></a>00104                         <span class="keywordflow">return</span> 0;
<a name="l00105"></a>00105                 }
<a name="l00106"></a>00106                 elmcount = ((<a class="code" href="a00011.html">DLISTUNR_entry</a> *) cur)-&gt;elmcount;
<a name="l00107"></a>00107                 <span class="keywordflow">if</span> ( elmcount &gt; list-&gt;<a class="code" href="a00047.html#gada6452d1a52bb049d90bfaba44a88b3c">elmmaxcount</a>) {
<a name="l00108"></a>00108                         <span class="keywordflow">return</span> 0;
<a name="l00109"></a>00109                 }
<a name="l00110"></a>00110                 <span class="keywordflow">if</span> (elmcount == 0) {
<a name="l00111"></a>00111                         <span class="keywordflow">return</span> 0;
<a name="l00112"></a>00112                 }
<a name="l00113"></a>00113                 size++;
<a name="l00114"></a>00114                 cursize += elmcount;
<a name="l00115"></a>00115         }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117         <span class="keywordflow">if</span> (size != list-&gt;<a class="code" href="a00047.html#ga384be6ddd260b20b9b6060579e53e78b">entrycount</a>) {
<a name="l00118"></a>00118                 <span class="keywordflow">return</span> 0;
<a name="l00119"></a>00119         }
<a name="l00120"></a>00120         <span class="keywordflow">if</span> (cursize != list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a>) {
<a name="l00121"></a>00121                 <span class="keywordflow">return</span> 0;
<a name="l00122"></a>00122         }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124         <span class="keywordflow">return</span> 1;
<a name="l00125"></a>00125 }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="comment"></span>
<a name="l00128"></a>00128 <span class="comment">/**</span>
<a name="l00129"></a>00129 <span class="comment"> * @brief checks if argument list is empty</span>
<a name="l00130"></a>00130 <span class="comment"> * @param list pointer to list.</span>
<a name="l00131"></a>00131 <span class="comment"> * @returns not zero for non empty list.</span>
<a name="l00132"></a>00132 <span class="comment"> */</span>
<a name="l00133"></a><a class="code" href="a00047.html#ga0290d4b52497dc3690054049f2817647">00133</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#ga0290d4b52497dc3690054049f2817647" title="checks if argument list is empty">DLISTUNR_isempty</a>( <a class="code" href="a00003.html">DLISTUNR</a> *list )
<a name="l00134"></a>00134 {
<a name="l00135"></a>00135         <span class="keywordflow">return</span> list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a> == 0;
<a name="l00136"></a>00136 }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="a00047.html#gadc37166b1334645228fc25a9e6771506">00139</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">size_t</span> <a class="code" href="a00047.html#gadc37166b1334645228fc25a9e6771506">DLISTUNR_size</a>( <a class="code" href="a00003.html">DLISTUNR</a> *list) 
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141         <span class="keywordflow">return</span> list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a>;
<a name="l00142"></a>00142 }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="a00047.html#ga4db401e1c08b3d07a78985fea9961936">00145</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">size_t</span> <a class="code" href="a00047.html#ga4db401e1c08b3d07a78985fea9961936">DLISTUNR_maxsize</a>( <a class="code" href="a00003.html">DLISTUNR</a>  *list )
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147         <span class="keywordflow">return</span> list-&gt;<a class="code" href="a00047.html#gada6452d1a52bb049d90bfaba44a88b3c">elmmaxcount</a>;
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 <span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">/**</span>
<a name="l00151"></a>00151 <span class="comment"> * @brief Returns position structure of first element in unrolled linked list.</span>
<a name="l00152"></a>00152 <span class="comment"> * @param list (in) the object</span>
<a name="l00153"></a>00153 <span class="comment"> * @return position structure of first element</span>
<a name="l00154"></a>00154 <span class="comment"> */</span>
<a name="l00155"></a><a class="code" href="a00047.html#gad6e5c8c22793aefefeff560f1cb55f3c">00155</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <a class="code" href="a00004.html">DLISTUNR_position</a> <a class="code" href="a00047.html#gad6e5c8c22793aefefeff560f1cb55f3c" title="Returns position structure of first element in unrolled linked list.">DLISTUNR_get_first</a>( <a class="code" href="a00003.html">DLISTUNR</a> *list )
<a name="l00156"></a>00156 {
<a name="l00157"></a>00157         <a class="code" href="a00004.html">DLISTUNR_position</a> ret;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159         ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a> = (<a class="code" href="a00011.html">DLISTUNR_entry</a> *) list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>.<a class="code" href="a00012.html#aec13745a49e3ff2cd72745c0ff3e4e45">next</a>;
<a name="l00160"></a>00160         ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> = 0;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162         <span class="keywordflow">return</span> ret;
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="comment"></span>
<a name="l00166"></a>00166 <span class="comment">/**</span>
<a name="l00167"></a>00167 <span class="comment"> * @brief Returns position structure of last element in unrolled linked list.</span>
<a name="l00168"></a>00168 <span class="comment"> * @param list (in) the object</span>
<a name="l00169"></a>00169 <span class="comment"> * @return position structure of first element</span>
<a name="l00170"></a>00170 <span class="comment"> */</span>
<a name="l00171"></a><a class="code" href="a00047.html#ga49b8d112ee987796b6a90920dd82a289">00171</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <a class="code" href="a00004.html">DLISTUNR_position</a> <a class="code" href="a00047.html#ga49b8d112ee987796b6a90920dd82a289" title="Returns position structure of last element in unrolled linked list.">DLISTUNR_get_last</a>( <a class="code" href="a00003.html">DLISTUNR</a> *list )
<a name="l00172"></a>00172 {
<a name="l00173"></a>00173         <a class="code" href="a00004.html">DLISTUNR_position</a> ret;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175         <span class="keywordflow">if</span> (list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a>) {
<a name="l00176"></a>00176                 ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a> = (<a class="code" href="a00011.html">DLISTUNR_entry</a> *) list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>.<a class="code" href="a00012.html#a8f2313e1ce7ba8c157ce612faad73aad">prev</a>;
<a name="l00177"></a>00177                 ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> = ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a> - 1;            
<a name="l00178"></a>00178         } <span class="keywordflow">else</span>  {
<a name="l00179"></a>00179                 ret = <a class="code" href="a00047.html#gad6e5c8c22793aefefeff560f1cb55f3c" title="Returns position structure of first element in unrolled linked list.">DLISTUNR_get_first</a>( list);
<a name="l00180"></a>00180         }
<a name="l00181"></a>00181         
<a name="l00182"></a>00182         <span class="keywordflow">return</span> ret;
<a name="l00183"></a>00183 }
<a name="l00184"></a>00184 <span class="comment"></span>
<a name="l00185"></a>00185 <span class="comment">/**</span>
<a name="l00186"></a>00186 <span class="comment"> * @brief Returns position to the next element in unrolled linked list.</span>
<a name="l00187"></a>00187 <span class="comment"> * @param list (in) the object</span>
<a name="l00188"></a>00188 <span class="comment"> * @param pos (in) iteration position in list.</span>
<a name="l00189"></a>00189 <span class="comment"> * @return position structure of the element that follows the element identified by pos structure.</span>
<a name="l00190"></a>00190 <span class="comment"> */</span>
<a name="l00191"></a><a class="code" href="a00047.html#ga686e489382b845f2887e4610929bd473">00191</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <a class="code" href="a00004.html">DLISTUNR_position</a> <a class="code" href="a00047.html#ga686e489382b845f2887e4610929bd473" title="Returns position to the next element in unrolled linked list.">DLISTUNR_next</a>(<a class="code" href="a00004.html">DLISTUNR_position</a> pos)
<a name="l00192"></a>00192 {
<a name="l00193"></a>00193         <a class="code" href="a00004.html">DLISTUNR_position</a> ret;
<a name="l00194"></a>00194         <a class="code" href="a00011.html">DLISTUNR_entry</a> *entry;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196         ret = pos;
<a name="l00197"></a>00197         entry = pos.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199         ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a>++;
<a name="l00200"></a>00200         <span class="keywordflow">if</span> (ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> &gt;= entry-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a>) {
<a name="l00201"></a>00201                 ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a> = (<a class="code" href="a00011.html">DLISTUNR_entry</a> *) entry-&gt;<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>.<a class="code" href="a00012.html#aec13745a49e3ff2cd72745c0ff3e4e45">next</a>;
<a name="l00202"></a>00202                 ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> = 0;
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204         <span class="keywordflow">return</span> ret;
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 <span class="comment"></span>
<a name="l00207"></a>00207 <span class="comment">/**</span>
<a name="l00208"></a>00208 <span class="comment"> * @brief Returns position to the previous element in unrolled linked list.</span>
<a name="l00209"></a>00209 <span class="comment"> * @param list (in) the object</span>
<a name="l00210"></a>00210 <span class="comment"> * @param pos (in) iteration position in list.</span>
<a name="l00211"></a>00211 <span class="comment"> * @return position structure of the element that precedes the element identified by pos structure.</span>
<a name="l00212"></a>00212 <span class="comment"> */</span>
<a name="l00213"></a><a class="code" href="a00047.html#gaff214a850e77e1053a319ec96e70e6f5">00213</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <a class="code" href="a00004.html">DLISTUNR_position</a> <a class="code" href="a00047.html#gaff214a850e77e1053a319ec96e70e6f5" title="Returns position to the previous element in unrolled linked list.">DLISTUNR_prev</a>(<a class="code" href="a00004.html">DLISTUNR_position</a> pos)
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215         <a class="code" href="a00004.html">DLISTUNR_position</a> ret;
<a name="l00216"></a>00216         <a class="code" href="a00011.html">DLISTUNR_entry</a> *entry;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218         ret = pos;
<a name="l00219"></a>00219         entry = pos.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>;
<a name="l00220"></a>00220         <span class="keywordflow">if</span> (ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a>) {
<a name="l00221"></a>00221                 ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a>--;
<a name="l00222"></a>00222         } <span class="keywordflow">else</span> {
<a name="l00223"></a>00223                 ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a> = (<a class="code" href="a00011.html">DLISTUNR_entry</a> *) entry-&gt;<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>.<a class="code" href="a00012.html#a8f2313e1ce7ba8c157ce612faad73aad">prev</a>;
<a name="l00224"></a>00224                 ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> = 0;
<a name="l00225"></a>00225                 if (ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a> &amp;&amp; ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a> != (<span class="keywordtype">size_t</span>) -1) {
<a name="l00226"></a>00226                         ret.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> = ret.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a> - 1;
<a name="l00227"></a>00227                 } 
<a name="l00228"></a>00228         }
<a name="l00229"></a>00229         <span class="keywordflow">return</span> ret;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 <span class="comment"></span>
<a name="l00233"></a>00233 <span class="comment">/**</span>
<a name="l00234"></a>00234 <span class="comment"> * @brief verify a position structure.</span>
<a name="l00235"></a>00235 <span class="comment"> */</span>
<a name="l00236"></a><a class="code" href="a00047.html#ga1dd2966c185e463aa8c40126122e96e2">00236</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#ga1dd2966c185e463aa8c40126122e96e2" title="verify a position structure.">DLISTUNR_check_position</a>( <a class="code" href="a00004.html">DLISTUNR_position</a> pos)
<a name="l00237"></a>00237 {
<a name="l00238"></a>00238         <span class="keywordflow">if</span> (!pos.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>) {
<a name="l00239"></a>00239                 <span class="keywordflow">return</span> -1;
<a name="l00240"></a>00240         }
<a name="l00241"></a>00241         <span class="keywordflow">if</span> (pos.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> &gt;= pos.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a>) {
<a name="l00242"></a>00242                 <span class="keywordflow">return</span> -1;
<a name="l00243"></a>00243         }
<a name="l00244"></a>00244         <span class="keywordflow">return</span> 0;
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 <span class="comment"></span>
<a name="l00247"></a>00247 <span class="comment">/** </span>
<a name="l00248"></a>00248 <span class="comment"> * @brief copy list entry identified by position structure (pos) into  user supplied memory area</span>
<a name="l00249"></a>00249 <span class="comment"> * @param list (in) the object</span>
<a name="l00250"></a>00250 <span class="comment"> * @param pos  (in) position pointer</span>
<a name="l00251"></a>00251 <span class="comment"> * @param data (in|out) user supplied buffer</span>
<a name="l00252"></a>00252 <span class="comment"> * @param size (in) size of user supplied buffer (must be equal to the size of one element).</span>
<a name="l00253"></a>00253 <span class="comment"> * @return 0 on success -1 on failure</span>
<a name="l00254"></a>00254 <span class="comment"> */</span>
<a name="l00255"></a><a class="code" href="a00047.html#gac38a1a149a73bda69de14aac70f116f6">00255</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#gac38a1a149a73bda69de14aac70f116f6" title="copy list entry identified by position structure (pos) into user supplied memory area">DLISTUNR_copy_at</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00004.html">DLISTUNR_position</a> pos, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size)
<a name="l00256"></a>00256 {
<a name="l00257"></a>00257         <span class="keywordtype">void</span> *ptr;
<a name="l00258"></a>00258         <span class="keywordflow">if</span> (size != list-&gt;<a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">elmsize</a>) {
<a name="l00259"></a>00259                 <span class="keywordflow">return</span> -1;
<a name="l00260"></a>00260         }
<a name="l00261"></a>00261         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#ga1dd2966c185e463aa8c40126122e96e2" title="verify a position structure.">DLISTUNR_check_position</a>(pos)) {
<a name="l00262"></a>00262                 <span class="keywordflow">return</span> -1;
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         ptr = pos.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>-&gt;<a class="code" href="a00047.html#ga0d7c4fdd75e4ee98f34e8e428291d1fc">buffer</a> + pos.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> * size;
<a name="l00266"></a>00266         memcpy(data, ptr, size);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268         <span class="keywordflow">return</span> 0;
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 <span class="comment"></span>
<a name="l00271"></a>00271 <span class="comment">/** </span>
<a name="l00272"></a>00272 <span class="comment"> * @brief return pointer to list entry identified by position structure (pos).</span>
<a name="l00273"></a>00273 <span class="comment"> * @param list (in) the object</span>
<a name="l00274"></a>00274 <span class="comment"> * @param pos  (in) position pointer</span>
<a name="l00275"></a>00275 <span class="comment"> * @return pointer to data entry in linked list.</span>
<a name="l00276"></a>00276 <span class="comment"> */</span>
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="a00047.html#ga7845b66b9da685fbdd9671a2f8f8af97">00278</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> uint8_t * <a class="code" href="a00047.html#ga7845b66b9da685fbdd9671a2f8f8af97" title="return pointer to list entry identified by position structure (pos).">DLISTUNR_at</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00004.html">DLISTUNR_position</a> pos)
<a name="l00279"></a>00279 {
<a name="l00280"></a>00280         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#ga1dd2966c185e463aa8c40126122e96e2" title="verify a position structure.">DLISTUNR_check_position</a>(pos)) {
<a name="l00281"></a>00281                 <span class="keywordflow">return</span> 0;
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284         <span class="keywordflow">return</span> pos.<a class="code" href="a00004.html#aeb6ab9ce857eed02ddfd3a3906cde45b">entry</a>-&gt;<a class="code" href="a00047.html#ga0d7c4fdd75e4ee98f34e8e428291d1fc">buffer</a> + pos.<a class="code" href="a00047.html#ga1e227c665237c422e471818cbc8008c6">index</a> * list-&gt;<a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">elmsize</a>;
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 <span class="comment"></span>
<a name="l00287"></a>00287 <span class="comment">/**</span>
<a name="l00288"></a>00288 <span class="comment"> * @brief insert new entry after a given entry into this unrolled linked list </span>
<a name="l00289"></a>00289 <span class="comment"> * @param list (in) pointer to list head</span>
<a name="l00290"></a>00290 <span class="comment"> * @param pos  (in) current position (newentry inserted after this one).</span>
<a name="l00291"></a>00291 <span class="comment"> * @param data (in) pointer to element that is to be inserted into this list.</span>
<a name="l00292"></a>00292 <span class="comment"> * @param size (in) size of area identified by data pointer.</span>
<a name="l00293"></a>00293 <span class="comment"> */</span>
<a name="l00294"></a>00294 <span class="keywordtype">int</span> <a class="code" href="a00047.html#ga82205532b2714164ed2a5a4d724f9094" title="insert new entry after a given entry into this unrolled linked list">DLISTUNR_insert_after</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00004.html">DLISTUNR_position</a> pos, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size);
<a name="l00295"></a>00295 <span class="comment"></span>
<a name="l00296"></a>00296 <span class="comment">/**</span>
<a name="l00297"></a>00297 <span class="comment"> * @brief insert new entry before a given entry into this unrolled linked list </span>
<a name="l00298"></a>00298 <span class="comment"> * @param list (in) pointer to list head</span>
<a name="l00299"></a>00299 <span class="comment"> * @param pos  (in) current position (newentry inserted before this one).</span>
<a name="l00300"></a>00300 <span class="comment"> * @param data (in) pointer to element that is to be inserted into this list.</span>
<a name="l00301"></a>00301 <span class="comment"> * @param size (in) size of area identified by data pointer.</span>
<a name="l00302"></a>00302 <span class="comment"> */</span>
<a name="l00303"></a><a class="code" href="a00047.html#ga226340b3f31b861f5180d637d2c795c6">00303</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#ga226340b3f31b861f5180d637d2c795c6" title="insert new entry before a given entry into this unrolled linked list">DLISTUNR_insert_before</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00004.html">DLISTUNR_position</a> pos, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size)
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305         <a class="code" href="a00004.html">DLISTUNR_position</a> insert_pos = <a class="code" href="a00047.html#gaff214a850e77e1053a319ec96e70e6f5" title="Returns position to the previous element in unrolled linked list.">DLISTUNR_prev</a>(pos);
<a name="l00306"></a>00306         
<a name="l00307"></a>00307         <span class="keywordflow">return</span> <a class="code" href="a00047.html#ga82205532b2714164ed2a5a4d724f9094" title="insert new entry after a given entry into this unrolled linked list">DLISTUNR_insert_after</a>( list, insert_pos, data, size);
<a name="l00308"></a>00308 }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="comment"></span>
<a name="l00311"></a>00311 <span class="comment">/**</span>
<a name="l00312"></a>00312 <span class="comment"> * @brief delete an element from a unrolled list.</span>
<a name="l00313"></a>00313 <span class="comment"> * @param list (in) the object</span>
<a name="l00314"></a>00314 <span class="comment"> * @param pos (in)  deletes element identified by this position structure</span>
<a name="l00315"></a>00315 <span class="comment"> * return -1 on failure 0 on success.</span>
<a name="l00316"></a>00316 <span class="comment"> */</span>
<a name="l00317"></a>00317  <span class="keywordtype">int</span> <a class="code" href="a00047.html#gaaf4a80ee43a17e67d1d646f6520137e3" title="delete an element from a unrolled list.">DLISTUNR_unlink</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00004.html">DLISTUNR_position</a> pos);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 <span class="comment"></span>
<a name="l00320"></a>00320 <span class="comment">/**</span>
<a name="l00321"></a>00321 <span class="comment"> * @brief insert element as last in list (used to maintain queue)</span>
<a name="l00322"></a>00322 <span class="comment"> * @param list (in) the object</span>
<a name="l00323"></a>00323 <span class="comment"> * @param data (in) pointer to element that is to be inserted into this list.</span>
<a name="l00324"></a>00324 <span class="comment"> * @param size (in) size of area identified by data pointer.</span>
<a name="l00325"></a>00325 <span class="comment"> */</span>
<a name="l00326"></a><a class="code" href="a00047.html#gad94fe8e20708dc1b6c3e244dd8f4b7b9">00326</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#gad94fe8e20708dc1b6c3e244dd8f4b7b9" title="insert element as last in list (used to maintain queue)">DLISTUNR_push_back</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size)
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328         <a class="code" href="a00004.html">DLISTUNR_position</a> last = <a class="code" href="a00047.html#ga49b8d112ee987796b6a90920dd82a289" title="Returns position structure of last element in unrolled linked list.">DLISTUNR_get_last</a>( list );
<a name="l00329"></a>00329         <span class="keywordflow">return</span> <a class="code" href="a00047.html#ga82205532b2714164ed2a5a4d724f9094" title="insert new entry after a given entry into this unrolled linked list">DLISTUNR_insert_after</a>(list, last, data, size);
<a name="l00330"></a>00330                 
<a name="l00331"></a>00331 }
<a name="l00332"></a>00332 <span class="comment"></span>
<a name="l00333"></a>00333 <span class="comment">/**</span>
<a name="l00334"></a>00334 <span class="comment"> * @brief insert element as last in list (used to maintain queue)</span>
<a name="l00335"></a>00335 <span class="comment"> * @param list (in) the object</span>
<a name="l00336"></a>00336 <span class="comment"> * @param data (in) pointer to element that is to be inserted into this list.</span>
<a name="l00337"></a>00337 <span class="comment"> * @param size (in) size of area identified by data pointer.</span>
<a name="l00338"></a>00338 <span class="comment"> */</span>
<a name="l00339"></a><a class="code" href="a00047.html#gacc9f0635aadc53905275d684bde629a7">00339</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#gacc9f0635aadc53905275d684bde629a7" title="insert element as last in list (used to maintain queue)">DLISTUNR_push_front</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size)
<a name="l00340"></a>00340 {
<a name="l00341"></a>00341         <a class="code" href="a00004.html">DLISTUNR_position</a> last = <a class="code" href="a00047.html#gad6e5c8c22793aefefeff560f1cb55f3c" title="Returns position structure of first element in unrolled linked list.">DLISTUNR_get_first</a>( list );
<a name="l00342"></a>00342         <span class="keywordflow">return</span> <a class="code" href="a00047.html#ga226340b3f31b861f5180d637d2c795c6" title="insert new entry before a given entry into this unrolled linked list">DLISTUNR_insert_before</a>(list, last, data, size);
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="comment"></span>
<a name="l00346"></a>00346 <span class="comment">/**</span>
<a name="l00347"></a>00347 <span class="comment"> * @brief copy data of last element into user supplied buffer and remove the last element from list (used to maintain double ended queue)</span>
<a name="l00348"></a>00348 <span class="comment"> * @param list (in) the object</span>
<a name="l00349"></a>00349 <span class="comment"> * @param data (in) pointer to element that is to receive data of list entry</span>
<a name="l00350"></a>00350 <span class="comment"> * @param size (in) size of area identified by data pointer.</span>
<a name="l00351"></a>00351 <span class="comment"> * @return return 0 on success.</span>
<a name="l00352"></a>00352 <span class="comment"> */</span>
<a name="l00353"></a><a class="code" href="a00047.html#ga3286a39fe8434d31e4fba39b25a60dfe">00353</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#ga3286a39fe8434d31e4fba39b25a60dfe" title="copy data of last element into user supplied buffer and remove the last element from list (used to ma...">DLISTUNR_pop_back</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355         <a class="code" href="a00004.html">DLISTUNR_position</a> pos;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357         
<a name="l00358"></a>00358         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#ga0290d4b52497dc3690054049f2817647" title="checks if argument list is empty">DLISTUNR_isempty</a>(list)) {
<a name="l00359"></a>00359                 <span class="keywordflow">return</span> -1;
<a name="l00360"></a>00360         }
<a name="l00361"></a>00361         
<a name="l00362"></a>00362         pos = <a class="code" href="a00047.html#ga49b8d112ee987796b6a90920dd82a289" title="Returns position structure of last element in unrolled linked list.">DLISTUNR_get_last</a>( list );
<a name="l00363"></a>00363         
<a name="l00364"></a>00364         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#gac38a1a149a73bda69de14aac70f116f6" title="copy list entry identified by position structure (pos) into user supplied memory area">DLISTUNR_copy_at</a>(list, pos, data, size)) {
<a name="l00365"></a>00365                 <span class="keywordflow">return</span> -1;
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#gaaf4a80ee43a17e67d1d646f6520137e3" title="delete an element from a unrolled list.">DLISTUNR_unlink</a>(list,pos)) {
<a name="l00369"></a>00369                 <span class="keywordflow">return</span> -1;
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371         <span class="keywordflow">return</span> 0;
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 <span class="comment"></span>
<a name="l00374"></a>00374 <span class="comment">/**</span>
<a name="l00375"></a>00375 <span class="comment"> * @brief copy data of first element into user supplied buffer and remove the first element from list (used to maintain double ended queue)</span>
<a name="l00376"></a>00376 <span class="comment"> * @param list (in) the object</span>
<a name="l00377"></a>00377 <span class="comment"> * @param data (in) pointer to element that is to receive data of list entry</span>
<a name="l00378"></a>00378 <span class="comment"> * @param size (in) size of area identified by data pointer.</span>
<a name="l00379"></a>00379 <span class="comment"> * @return return 0 on success.</span>
<a name="l00380"></a>00380 <span class="comment"> */</span>
<a name="l00381"></a><a class="code" href="a00047.html#gac6338ee42fd69900475253be10c462e5">00381</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">int</span> <a class="code" href="a00047.html#gac6338ee42fd69900475253be10c462e5" title="copy data of first element into user supplied buffer and remove the first element from list (used to ...">DLISTUNR_pop_front</a>(<a class="code" href="a00003.html">DLISTUNR</a> *list, <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size)
<a name="l00382"></a>00382 {
<a name="l00383"></a>00383         <a class="code" href="a00004.html">DLISTUNR_position</a> pos;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385         
<a name="l00386"></a>00386         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#ga0290d4b52497dc3690054049f2817647" title="checks if argument list is empty">DLISTUNR_isempty</a>(list)) {
<a name="l00387"></a>00387                 <span class="keywordflow">return</span> -1;
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389         
<a name="l00390"></a>00390         pos = <a class="code" href="a00047.html#gad6e5c8c22793aefefeff560f1cb55f3c" title="Returns position structure of first element in unrolled linked list.">DLISTUNR_get_first</a>( list );
<a name="l00391"></a>00391 
<a name="l00392"></a>00392         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#gac38a1a149a73bda69de14aac70f116f6" title="copy list entry identified by position structure (pos) into user supplied memory area">DLISTUNR_copy_at</a>(list, pos, data, size)) {
<a name="l00393"></a>00393                 <span class="keywordflow">return</span> -1;
<a name="l00394"></a>00394         }
<a name="l00395"></a>00395         <span class="keywordflow">if</span> (<a class="code" href="a00047.html#gaaf4a80ee43a17e67d1d646f6520137e3" title="delete an element from a unrolled list.">DLISTUNR_unlink</a>(list,pos)) {
<a name="l00396"></a>00396                 <span class="keywordflow">return</span> -1;
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398         <span class="keywordflow">return</span> 0;
<a name="l00399"></a>00399 }
<a name="l00400"></a>00400 <span class="comment"></span>
<a name="l00401"></a>00401 <span class="comment">/**</span>
<a name="l00402"></a>00402 <span class="comment"> * @brief Macro for iterate over all elements of a list, the list is traversed in forward direction from first element to the last element.</span>
<a name="l00403"></a>00403 <span class="comment"> * @param loopvarname (type DLISTUNR_position) struct that identifies current element</span>
<a name="l00404"></a>00404 <span class="comment"> * @param list (type DLISTUNR *) pointer to the list that is traversed</span>
<a name="l00405"></a>00405 <span class="comment"> */</span>
<a name="l00406"></a><a class="code" href="a00047.html#ga2199fa5ef5950c4321c960de07c1dd96">00406</a> <span class="preprocessor">#define DLISTUNR_FOREACH( loopvarname, list )\</span>
<a name="l00407"></a>00407 <span class="preprocessor">  for((loopvarname) = DLISTUNR_get_first( list );\</span>
<a name="l00408"></a>00408 <span class="preprocessor">      (loopvarname).entry != (DLISTUNR_entry *) &amp;(list)-&gt;root;\</span>
<a name="l00409"></a>00409 <span class="preprocessor">      (loopvarname) = DLISTUNR_next( loopvarname ) )</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00411"></a>00411 <span class="comment">/**</span>
<a name="l00412"></a>00412 <span class="comment"> * @brief Macro for iterate over all elements of a list, the list is traversed in reverse direction from last element to the first element.</span>
<a name="l00413"></a>00413 <span class="comment"> * @param loopvarname (type DLISTUNR_position) pointer to the current element</span>
<a name="l00414"></a>00414 <span class="comment"> * @param list (type DLISTUNR *) pointer to the list that is traversed</span>
<a name="l00415"></a>00415 <span class="comment"> */</span>
<a name="l00416"></a><a class="code" href="a00047.html#ga6f36f5cdff7dc616d78ac582375fa9ff">00416</a> <span class="preprocessor">#define DLISTUNR_FOREACH_REVERSE( loopvarname, list )\</span>
<a name="l00417"></a>00417 <span class="preprocessor">  for((loopvarname) = DLISTUNR_get_last( list );\</span>
<a name="l00418"></a>00418 <span class="preprocessor">      (loopvarname).entry != (DLISTUNR_entry *) &amp;(list)-&gt;root;\</span>
<a name="l00419"></a>00419 <span class="preprocessor">      (loopvarname) = DLISTUNR_prev( loopvarname ) )</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00421"></a>00421 <span class="comment">/**</span>
<a name="l00422"></a>00422 <span class="comment"> * @brief Macro for iterate over all elements of a list, You may delete the current element; the list is traversed in forward direction from first element to the last element.</span>
<a name="l00423"></a>00423 <span class="comment"> * @param loopvarname (type DLISTUNR_position) pointer to the current element</span>
<a name="l00424"></a>00424 <span class="comment"> * @param loopvarnamenext (type DLISTUNR_position) do not modify! pointer to next element after current element (used for iteration).</span>
<a name="l00425"></a>00425 <span class="comment"> * @param list (type DLISTUNR *) pointer to the list that is traversed</span>
<a name="l00426"></a>00426 <span class="comment"> */</span>
<a name="l00427"></a><a class="code" href="a00047.html#ga92ff07b38bfb3654352b4ed371a657b2">00427</a> <span class="preprocessor">#define DLISTUNR_FOREACH_SAVE( loopvarname, loopvarnext, list )\</span>
<a name="l00428"></a>00428 <span class="preprocessor">  for((loopvarname) = DLISTUNR_get_first( list ), (loopvarnext) = DLISTUNR_next( loopvarname );\</span>
<a name="l00429"></a>00429 <span class="preprocessor">      (loopvarname).entry != (DLISTUNR_entry *) &amp;(list)-&gt;root;\</span>
<a name="l00430"></a>00430 <span class="preprocessor">      (loopvarname) = (loopvarnext), (loopvarnext) = DLISTUNR_next(loopvarname) )</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00432"></a>00432 <span class="comment">/**</span>
<a name="l00433"></a>00433 <span class="comment"> * @brief Macro for iterate over all elements of a list, You may delete the current element; the list is traversed in reverse direction from last element to the first element.</span>
<a name="l00434"></a>00434 <span class="comment"> * @param loopvarname (type DLISTUNR_position) pointer to the current element</span>
<a name="l00435"></a>00435 <span class="comment"> * @param loopvarnamenext (type DLISTUNR_position) do not modify! pointer to next element after current element (used for iteration).</span>
<a name="l00436"></a>00436 <span class="comment"> * @param list (type DLISTUNR *) pointer to the list that is traversed</span>
<a name="l00437"></a>00437 <span class="comment"> */</span>
<a name="l00438"></a><a class="code" href="a00047.html#gad317561e804f3d6e5eabb799690da1c9">00438</a> <span class="preprocessor">#define DLISTUNR_FOREACH_REVERSE_SAVE( loopvarname, loopvarnext, list )\</span>
<a name="l00439"></a>00439 <span class="preprocessor">  for((loopvarname) = DLISTUNR_get_last(list);\</span>
<a name="l00440"></a>00440 <span class="preprocessor">      (loopvarname).entry != (DLISTUNR_entry *) &amp;(list)-&gt;root;\</span>
<a name="l00441"></a>00441 <span class="preprocessor">      (loopvarname) = (loopvarnext), (loopvarnext) = DLISTUNR_prev(loopvarname) )</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span>
<a name="l00443"></a>00443 <span class="comment"></span>
<a name="l00444"></a>00444 <span class="comment">/**</span>
<a name="l00445"></a>00445 <span class="comment"> * @brief list free all entries of the list. The list will then be an empty list.</span>
<a name="l00446"></a>00446 <span class="comment"> */</span>
<a name="l00447"></a><a class="code" href="a00047.html#gabe7992a9cd77af1e758ce634779565df">00447</a> <a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">void</span> <a class="code" href="a00047.html#gabe7992a9cd77af1e758ce634779565df" title="list free all entries of the list. The list will then be an empty list.">DLISTUNR_free</a>( <a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00047.html#ga0f32e9881b86c7ddab83041de9f6888c">DLISTUNR_VISITOR_V</a> free_func, <span class="keywordtype">void</span> *context)
<a name="l00448"></a>00448 {
<a name="l00449"></a>00449         <a class="code" href="a00012.html">DRING</a> *next,*cur;
<a name="l00450"></a>00450         <a class="code" href="a00011.html">DLISTUNR_entry</a> *curr;
<a name="l00451"></a>00451         <span class="keywordtype">size_t</span> pos,elmsize,i;
<a name="l00452"></a>00452         
<a name="l00453"></a>00453         elmsize = list-&gt;<a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">elmsize</a>;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         <a class="code" href="a00048.html#gaab96829db58e4eaa3cec725c9c99ff69" title="Macro for iterate over all elements of a list, You may delete the current element; the list is traver...">DRING_FOREACH_SAVE</a>( cur, next, &amp;list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>) {
<a name="l00456"></a>00456         
<a name="l00457"></a>00457                 curr = (<a class="code" href="a00011.html">DLISTUNR_entry</a> *) cur;
<a name="l00458"></a>00458                 <span class="keywordflow">if</span> (free_func) {
<a name="l00459"></a>00459                         <span class="keywordflow">for</span>(pos = 0,i=0;i&lt;curr-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a>;i++) {
<a name="l00460"></a>00460                                 free_func(list,  (<span class="keywordtype">void</span> *) (curr-&gt;<a class="code" href="a00047.html#ga0d7c4fdd75e4ee98f34e8e428291d1fc">buffer</a> +pos), context);
<a name="l00461"></a>00461                                 pos += elmsize;
<a name="l00462"></a>00462                         }
<a name="l00463"></a>00463                 }
<a name="l00464"></a>00464                 <span class="comment">/*list-&gt;ctx-&gt;free( DRING_unlink(cur) );*/</span>
<a name="l00465"></a>00465                 free( cur );
<a name="l00466"></a>00466                 
<a name="l00467"></a>00467         }       
<a name="l00468"></a>00468         <a class="code" href="a00048.html#gaea5e890f7d1dab572fe3ef6f067e5d26" title="initialises an empty list head">DRING_init</a>( &amp;list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a> );
<a name="l00469"></a>00469         list-&gt;<a class="code" href="a00047.html#ga384be6ddd260b20b9b6060579e53e78b">entrycount</a> = 0;
<a name="l00470"></a>00470         list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a> = 0;
<a name="l00471"></a>00471 }       
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 <span class="preprocessor">#if 0</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span><a class="code" href="a00018.html#ad8685d2efad5bbbf60ebe6bc79e05350">M_INLINE</a> <span class="keywordtype">void</span> DLISTUNR_deleteif( <a class="code" href="a00003.html">DLISTUNR</a> *list, <a class="code" href="a00047.html#gaab1a298e92d3537d3d99fb3026fa8878">DLISTUNR_VISITOR</a> free_func, <span class="keywordtype">void</span> *context)
<a name="l00475"></a>00475 {
<a name="l00476"></a>00476         <a class="code" href="a00012.html">DRING</a> *next,*cur;
<a name="l00477"></a>00477         <a class="code" href="a00011.html">DLISTUNR_entry</a> *curr;
<a name="l00478"></a>00478         <span class="keywordtype">size_t</span> pos,elmsize,i;
<a name="l00479"></a>00479         
<a name="l00480"></a>00480         elmsize = list-&gt;<a class="code" href="a00003.html#a3fcc16c9e16c759cd63a2a5aa48364ec">elmsize</a>;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482         <a class="code" href="a00048.html#gaab96829db58e4eaa3cec725c9c99ff69" title="Macro for iterate over all elements of a list, You may delete the current element; the list is traver...">DRING_FOREACH_SAVE</a>( cur, next, &amp;list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a>) {
<a name="l00483"></a>00483         
<a name="l00484"></a>00484                 curr = (<a class="code" href="a00011.html">DLISTUNR_entry</a> *) cur;
<a name="l00485"></a>00485                 <span class="keywordflow">if</span> (free_func) {
<a name="l00486"></a>00486                         <span class="keywordflow">for</span>(pos = 0,i=0;i&lt;curr-&gt;<a class="code" href="a00047.html#ga746831dd1567f68b1ebbe4b2da5d21d7">elmcount</a>;i++) {
<a name="l00487"></a>00487                                 free_func(list,  (<span class="keywordtype">void</span> *) curr-&gt;<a class="code" href="a00047.html#ga0d7c4fdd75e4ee98f34e8e428291d1fc">buffer</a>[ pos ], context);
<a name="l00488"></a>00488                                 pos += elmsize;
<a name="l00489"></a>00489                         }
<a name="l00490"></a>00490                 }
<a name="l00491"></a>00491                 <span class="comment">/*list-&gt;ctx-&gt;free( DRING_unlink(cur) );*/</span>
<a name="l00492"></a>00492                 list-&gt;ctx-&gt;free( cur );
<a name="l00493"></a>00493                 
<a name="l00494"></a>00494         }       
<a name="l00495"></a>00495         <a class="code" href="a00048.html#gaea5e890f7d1dab572fe3ef6f067e5d26" title="initialises an empty list head">DRING_init</a>( &amp;list-&gt;<a class="code" href="a00047.html#ga54f568b298b25c9e2c8d1b50dfc43a97">root</a>.<a class="code" href="a00011.html#a035195f28a7455ee105ab3b4920186da">ring</a> );
<a name="l00496"></a>00496         list-&gt;<a class="code" href="a00047.html#ga384be6ddd260b20b9b6060579e53e78b">entrycount</a> = 0;
<a name="l00497"></a>00497         list-&gt;<a class="code" href="a00047.html#ga0e262304c4fb6cd12e2911cec49f4346">elmcount</a> = 0;
<a name="l00498"></a>00498 }       
<a name="l00499"></a>00499 <span class="preprocessor">#endif</span>
<a name="l00500"></a>00500 <span class="preprocessor"></span>
<a name="l00501"></a>00501 <span class="comment">/*</span>
<a name="l00502"></a>00502 <span class="comment"> * @}</span>
<a name="l00503"></a>00503 <span class="comment"> */</span>
<a name="l00504"></a>00504 <span class="preprocessor">#ifdef  __cplusplus</span>
<a name="l00505"></a>00505 <span class="preprocessor"></span>}
<a name="l00506"></a>00506 <span class="preprocessor">#endif</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span>
<a name="l00508"></a>00508 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Sep 18 2011 20:14:06 for Simple data structures / objects in plain C by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
